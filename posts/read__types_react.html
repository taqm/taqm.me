<!DOCTYPE html><html lang="ja"><head><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-X38HKLJWTQ"></script><script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-X38HKLJWTQ', { page_path: window.location.pathname, }); </script><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><meta name="robots" content="nofollow noindex"/><title>@types/react の中を少し読んでみる | taqm&#x27;s blog</title><meta name="keywords" content="React,TypeScript"/><meta name="description" content="Reactの型定義として提供されている&#x27;@types/react&#x27;の実装を読んでみて解説です。"/><meta property="og:url" content="https://taqm.me/posts/read__types_react"/><meta property="og:type" content="article"/><meta property="og:title" content="@types/react の中を少し読んでみる | taqm&amp;apos;s blog"/><meta property="og:image" content="https://taqm.me/static/site_logo.png"/><meta property="og:description" content="Reactの型定義として提供されている&#x27;@types/react&#x27;の実装を読んでみて解説です。"/><meta property="og:site_name" content="taqm.me"/><meta name="twitter:card" content="summary"/><meta name="twitter:site" content="taqm"/><meta name="next-head-count" content="14"/><link rel="preload" href="/_next/static/css/3bd3ee853585bdba2b55.css" as="style"/><link rel="stylesheet" href="/_next/static/css/3bd3ee853585bdba2b55.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/main-8741ed3c7ec57f378f59.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-95c2b224bccf352ee870.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.daa7383ad2ab2e6757c1.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.286c5ad94e4334e87283.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-62c4ae74494db6a57e9e.js" as="script"/><link rel="preload" href="/_next/static/chunks/79afb1f29f0e22fb2195c114356294f95861ebcc.293ad4049eec03f4e065.js" as="script"/><link rel="preload" href="/_next/static/chunks/2c3b9bffc7150b37a7b3810dfcf1c0b0fac2bd18.26412b03d1df03d45396.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/posts/%5Bslug%5D-d84c8237cab24ecd19e3.js" as="script"/><style id="__jsx-2615209551">.inner.jsx-2615209551{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;height:2.5rem;}@media (min-width:640px){.inner.jsx-2615209551{-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;height:4rem;padding-left:1.5rem;padding-right:1.5rem;}}</style></head><body><div id="__next"><header class="jsx-2615209551 border-b border-gray-200 bg-white"><div class="jsx-2615209551 inner max-w-screen-lg mx-auto"><a class="jsx-2615209551 text-xl sm:text-2xl" href="/">taqm&#x27;blog</a></div></header><main class="container py-16"><article class="post-page"><div class="text-sm text-gray-500">2019-12-13</div><h1 class="text-2xl font-bold">@types/react の中を少し読んでみる</h1><ul class="flex flex-wrap mt-2"><li class="mr-2 bg-gray-200 hover:bg-gray-300"><a class="block px-2 h-full text-sm" href="/tags/React">React</a></li><li class="mr-2 bg-gray-200 hover:bg-gray-300"><a class="block px-2 h-full text-sm" href="/tags/TypeScript">TypeScript</a></li></ul><div class="mt-10"><h2 class="heading lv-2">注意</h2>
<p class="paragraph">この記事は2019/12時点の記事です。
Reactのバージョンも上がり<code class="code">React.VFC</code>なども登場しているのでご注意ください</p>
<h2 class="heading lv-2">はじめに</h2>
<p class="paragraph">ここ最近はTypeScriptを利用することがデファクトスタンダードになりつつありますね。
そこでその際に必要になるReactの型定義(<code class="code">@types/react</code>)について色々おさらいしてみます。</p>
<p class="paragraph">対象のパッケージは<a href="https://www.npmjs.com/package/@types/react" class="anchor" rel="noopener noreferrer" target="_blank">こちら</a></p>
<p class="paragraph">npm: <a href="https://www.npmjs.com/package/@types/react" class="anchor" rel="noopener noreferrer" target="_blank">https://www.npmjs.com/package/@types/react</a>
GitHub: <a href="https://github.com/DefinitelyTyped/DefinitelyTyped/tree/master/types/react" class="anchor" rel="noopener noreferrer" target="_blank">https://github.com/DefinitelyTyped/DefinitelyTyped/tree/master/types/react</a></p>
<h2 class="heading lv-2">解説</h2>
<p class="paragraph"><code class="code">@types/react</code>では<code class="code">global.d.ts</code>と<code class="code">index.d.ts</code>の２つのファイルが提供されていますので
それぞれを見ていきましょう。</p>
<h3 class="heading lv-3"><code class="code">global.d.ts</code></h3>
<p class="paragraph"><a href="https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/react/global.d.ts" class="anchor" rel="noopener noreferrer" target="_blank">https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/react/global.d.ts</a></p>
<p class="paragraph">見てみるとわかるのですが空のinterface定義が並んでいます。
そしてファイルの先頭に下記のコメントが。</p>
<div class="remark-highlight"><pre class="language-ts pre"><code class="language-ts code"><span class="token comment">/*</span>
<span class="token comment">React projects that don't include the DOM library need these interfaces to compile.</span>
<span class="token comment">React Native applications use React, but there is no DOM available. The JavaScript runtime</span>
<span class="token comment">is ES6/ES2015 only. These definitions allow such projects to compile with only `--lib ES6`.</span>
<span class="token comment">Warning: all of these interfaces are empty. If you want type definitions for various properties</span>
<span class="token comment">(such as HTMLInputElement.prototype.value), you need to add `--lib DOM` (via command line or tsconfig.json).</span>
<span class="token comment">*/</span>
</code></pre></div>
<p class="paragraph">適当に訳すと
「これらの定義を用意することで<code class="code">lib.dom</code>を読み込まなくてもコンパイルできるようになります」
「ただし、空の定義なのでプロパティなどにアクセスしたいのならちゃんと読み込んでね」
ってことみたいです。</p>
<p class="paragraph">大体は<code class="code">lib.dom</code>を読み込むと思うのでこのファイルはあまり気にしなくていいかもしれません。</p>
<h3 class="heading lv-3"><code class="code">index.d.ts</code></h3>
<p class="paragraph"><a href="https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/react/index.d.ts" class="anchor" rel="noopener noreferrer" target="_blank">https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/react/index.d.ts</a></p>
<p class="paragraph">それではReact本体の型定義を見ていきます。
今回紹介する定義は以下になります。</p>
<ul class="list unordered">
<li><a href="#reactcomponent" class="anchor">React.Component</a></li>
<li><a href="#reactcomponentclass" class="anchor">React.ComponentClass</a></li>
<li><a href="#reactfunctioncomponent" class="anchor">React.FunctionComponent</a></li>
<li><a href="#reactcomponenttype" class="anchor">React.ComponentType</a></li>
<li><a href="#reactcomponentprops" class="anchor">React.ComponentProps</a></li>
<li><a href="#reactreactnode" class="anchor">React.ReactNode</a></li>
<li><a href="#reactcomponentprops" class="anchor">React.ComponentProps</a></li>
<li><a href="#reactreactdom" class="anchor">React.ReactDOM</a></li>
</ul>
<h4 class="heading lv-4">React.Component</h4>
<p class="paragraph">言わずとしれたクラスコンポーネントの型です。
正確にはクラスなのですが重要なのでとりあげます。</p>
<div class="has-filename"><div class="filename">型定義</div><pre class="language-ts pre"><code class="language-ts code"><span class="token keyword">interface</span> <span class="token class-name">Component<span class="token operator">&#x3C;</span><span class="token constant">P</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token constant">S</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token constant">SS</span> <span class="token operator">=</span> <span class="token builtin">any</span><span class="token operator">></span></span> <span class="token keyword">extends</span> <span class="token class-name">ComponentLifecycle<span class="token operator">&#x3C;</span><span class="token constant">P</span><span class="token punctuation">,</span> <span class="token constant">S</span><span class="token punctuation">,</span> <span class="token constant">SS</span><span class="token operator">></span></span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
</code></pre></div>
<p class="paragraph">実際はクラスなので継承して使うことになります。</p>
<div class="remark-highlight"><pre class="language-tsx pre"><code class="language-tsx code"><span class="token keyword">type</span> <span class="token class-name">Props</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">State</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">Sample</span> <span class="token keyword">extends</span> <span class="token class-name">React</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">Component</span></span><span class="token operator">&#x3C;</span><span class="token maybe-class-name">Props</span><span class="token punctuation">,</span> <span class="token maybe-class-name">State</span><span class="token operator">></span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre></div>
<p class="paragraph">これで<code class="code">this.props</code>や<code class="code">this.state</code>,<code class="code">this.setState</code>などが型安全になりました。</p>
<h5 class="heading lv-5">contextType</h5>
<p class="paragraph">クラスの定義をよく読むとこんな記述が。</p>
<div class="remark-highlight"><pre class="language-tsx pre"><code class="language-tsx code"><span class="token keyword">static</span> contextType<span class="token operator">?</span><span class="token operator">:</span> <span class="token maybe-class-name">Context</span><span class="token operator">&#x3C;</span><span class="token builtin">any</span><span class="token operator">></span><span class="token punctuation">;</span>
context<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span>
</code></pre></div>
<p class="paragraph">これはContextAPIをクラスコンポーネントで利用する際の型定義になるのですが
<code class="code">any</code>と書かれているので実際に使う際は以下のようにしてあげましょう。</p>
<div class="remark-highlight"><pre class="language-tsx pre"><code class="language-tsx code"><span class="token keyword">const</span> hogeCtx <span class="token operator">=</span> <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token method function property-access">createContext</span><span class="token punctuation">(</span><span class="token punctuation">{</span> count<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">Child</span> <span class="token keyword">extends</span> <span class="token class-name">React</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">Component</span></span><span class="token operator">&#x3C;</span><span class="token maybe-class-name">Props</span><span class="token punctuation">,</span> <span class="token maybe-class-name">State</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> contextType <span class="token operator">=</span> hogeCtx<span class="token punctuation">;</span>
    context<span class="token operator">!</span><span class="token operator">:</span> <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">ContextType</span></span><span class="token operator">&#x3C;</span><span class="token keyword">typeof</span> hogeCtx<span class="token operator">></span><span class="token punctuation">;</span>

    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>h1</span><span class="token punctuation">></span></span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">context</span><span class="token punctuation">.</span><span class="token property-access">count</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>h1</span><span class="token punctuation">></span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div>
<p class="paragraph">TypeScript3.7以降であれば以下の書き方になります</p>
<div class="remark-highlight"><pre class="language-tsx pre"><code class="language-tsx code"><span class="token keyword">class</span> <span class="token class-name">Child</span> <span class="token keyword">extends</span> <span class="token class-name">React</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">Component</span></span><span class="token operator">&#x3C;</span><span class="token maybe-class-name">Props</span><span class="token punctuation">,</span> <span class="token maybe-class-name">State</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> contextType <span class="token operator">=</span> hogeCtx<span class="token punctuation">;</span>
    <span class="token keyword">declare</span> context<span class="token operator">:</span> <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">ContextType</span></span><span class="token operator">&#x3C;</span><span class="token keyword">typeof</span> hogeCtx<span class="token operator">></span>
    <span class="token comment">// ↑ここが変数の再定義ではなく型の定義のみでよい</span>
    <span class="token spread operator">...</span>
</code></pre></div>
<p class="paragraph">こうすることで <code class="code">this.context</code> が型安全に利用することができます。</p>
<h5 class="heading lv-5">注記</h5>
<p class="paragraph">React 16.3より前から存在する<code class="code">Legacy Context</code>についても同様に<code class="code">this.context</code>を利用していました。
その場合は<code class="code">contextType</code>の定義はせず<code class="code">any</code>のまま利用するほうが良いかと思います。</p>
<h4 class="heading lv-4">React.ComponentClass</h4>
<p class="paragraph">これは<code class="code">React.Component</code>などのインターフェースになります。</p>
<div class="has-filename"><div class="filename">型定義</div><pre class="language-ts pre"><code class="language-ts code"><span class="token keyword">interface</span> <span class="token class-name">ComponentClass<span class="token operator">&#x3C;</span><span class="token constant">P</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token constant">S</span> <span class="token operator">=</span> ComponentState<span class="token operator">></span></span> <span class="token keyword">extends</span> <span class="token class-name">StaticLifecycle<span class="token operator">&#x3C;</span><span class="token constant">P</span><span class="token punctuation">,</span> <span class="token constant">S</span><span class="token operator">></span></span> <span class="token punctuation">{</span>
    <span class="token keyword">new</span> <span class="token punctuation">(</span>props<span class="token operator">:</span> <span class="token constant">P</span><span class="token punctuation">,</span> context<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token operator">:</span> Component<span class="token operator">&#x3C;</span><span class="token constant">P</span><span class="token punctuation">,</span> <span class="token constant">S</span><span class="token operator">></span><span class="token punctuation">;</span>
    propTypes<span class="token operator">?</span><span class="token operator">:</span> WeakValidationMap<span class="token operator">&#x3C;</span><span class="token constant">P</span><span class="token operator">></span><span class="token punctuation">;</span>
    contextType<span class="token operator">?</span><span class="token operator">:</span> Context<span class="token operator">&#x3C;</span><span class="token builtin">any</span><span class="token operator">></span><span class="token punctuation">;</span>
    contextTypes<span class="token operator">?</span><span class="token operator">:</span> ValidationMap<span class="token operator">&#x3C;</span><span class="token builtin">any</span><span class="token operator">></span><span class="token punctuation">;</span>
    childContextTypes<span class="token operator">?</span><span class="token operator">:</span> ValidationMap<span class="token operator">&#x3C;</span><span class="token builtin">any</span><span class="token operator">></span><span class="token punctuation">;</span>
    defaultProps<span class="token operator">?</span><span class="token operator">:</span> Partial<span class="token operator">&#x3C;</span><span class="token constant">P</span><span class="token operator">></span><span class="token punctuation">;</span>
    displayName<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div>
<p class="paragraph">クラスとインターフェースと何が違うのかというと言語化が難しいのですが以下のような挙動になります。</p>
<div class="remark-highlight"><pre class="language-tsx pre"><code class="language-tsx code"><span class="token keyword">type</span> <span class="token class-name">Props</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">Hoge</span> <span class="token keyword">extends</span> <span class="token class-name">React</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">Component</span></span><span class="token operator">&#x3C;</span><span class="token maybe-class-name">Props</span><span class="token operator">></span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> hoge<span class="token operator">:</span> <span class="token maybe-class-name">Hoge</span> <span class="token operator">=</span> <span class="token maybe-class-name">Hoge</span><span class="token punctuation">;</span> <span class="token comment">// これはエラー</span>
<span class="token keyword">const</span> hogeType<span class="token operator">:</span> <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">ComponentClass</span></span><span class="token operator">&#x3C;</span><span class="token maybe-class-name">Props</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token maybe-class-name">Hoge</span><span class="token punctuation">;</span>
</code></pre></div>
<p class="paragraph">クラスにするということはインスタンスの型となるため、
純粋なコンポーネントのインターフェースが欲しい場合はこちらの型を使うことになります。
具体的な利用例は後述する<code class="code">React.ComponentType</code>でご紹介します。</p>
<h4 class="heading lv-4">React.FunctionComponent</h4>
<p class="paragraph">関数型コンポーネントの型となる<code class="code">FunctionComponent</code>です。
最近はクラスコンポーネントよりもこちらのほうが主流ですね。</p>
<p class="paragraph">エイリアスとして<code class="code">React.FC</code>というものもあります。（私は短いほうが好きなのでこちらを多用しています</p>
<div class="has-filename"><div class="filename">型定義</div><pre class="language-ts pre"><code class="language-ts code"><span class="token keyword">interface</span> <span class="token class-name">FunctionComponent<span class="token operator">&#x3C;</span><span class="token constant">P</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token operator">></span></span> <span class="token punctuation">{</span>
    <span class="token punctuation">(</span>props<span class="token operator">:</span> PropsWithChildren<span class="token operator">&#x3C;</span><span class="token constant">P</span><span class="token operator">></span><span class="token punctuation">,</span> context<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token operator">:</span> ReactElement <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    propTypes<span class="token operator">?</span><span class="token operator">:</span> WeakValidationMap<span class="token operator">&#x3C;</span><span class="token constant">P</span><span class="token operator">></span><span class="token punctuation">;</span>
    contextTypes<span class="token operator">?</span><span class="token operator">:</span> ValidationMap<span class="token operator">&#x3C;</span><span class="token builtin">any</span><span class="token operator">></span><span class="token punctuation">;</span>
    defaultProps<span class="token operator">?</span><span class="token operator">:</span> Partial<span class="token operator">&#x3C;</span><span class="token constant">P</span><span class="token operator">></span><span class="token punctuation">;</span>
    displayName<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">FC</span><span class="token operator">&#x3C;</span><span class="token constant">P</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token operator">></span></span> <span class="token operator">=</span> FunctionComponent<span class="token operator">&#x3C;</span><span class="token constant">P</span><span class="token operator">></span><span class="token punctuation">;</span>
</code></pre></div>
<p class="paragraph">ここではそれぞれのプロパティについて説明します。</p>
<h5 class="heading lv-5">関数本体</h5>
<p class="paragraph">関数の第２引数は<code class="code">Legacy Context</code>の値になるので最近だと利用することはないです。
(非推奨なのでanyのまま放置されているのだと思います)</p>
<h5 class="heading lv-5">propsTypes</h5>
<p class="paragraph"><code class="code">propsTypes</code>もありますがTypeScriptの場合はコンパイルエラーでカバーできるので
わざわざ記述することはなくなりました。</p>
<h5 class="heading lv-5">contextTypes</h5>
<p class="paragraph"><code class="code">contextTypes</code>についても<code class="code">Legacy Context</code>関連なので無視！</p>
<h5 class="heading lv-5">defaultProps</h5>
<p class="paragraph">こちらは<code class="code">props</code>に対してデフォルト値を与えるものになります（そのまま
個人的には<code class="code">defaultProps</code>で定義した項目はoptionalじゃなくできるようになってほしいです...</p>
<h5 class="heading lv-5">displayName</h5>
<p class="paragraph">これを設定しておくことでデバッグ時などにコンポーネント名として表示してくれます。
minify時に関数名などは消えてしまいデバッグが辛いので極力設定しましょう!</p>
<p class="paragraph"><strong>ちなみに</strong>
Hooksが出てくるまでは<code class="code">StatelessFunctionComponent</code>(<code class="code">SFC</code>)というものがありましたが
現在は非推奨になっているためこちらに切り替えましょう。</p>
<h4 class="heading lv-4">React.ComponentType</h4>
<p class="paragraph">まずは型定義</p>
<div class="has-filename"><div class="filename">型定義</div><pre class="language-ts pre"><code class="language-ts code"><span class="token keyword">type</span> <span class="token class-name">ComponentType<span class="token operator">&#x3C;</span><span class="token constant">P</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token operator">></span></span> <span class="token operator">=</span> ComponentClass<span class="token operator">&#x3C;</span><span class="token constant">P</span><span class="token operator">></span> <span class="token operator">|</span> FunctionComponent<span class="token operator">&#x3C;</span><span class="token constant">P</span><span class="token operator">></span><span class="token punctuation">;</span>
</code></pre></div>
<p class="paragraph">上記で説明した「クラスコンポーネントor関数コンポーネント」という型で、
「とにかくコンポーネントがほしい！！」って場合に利用します。
具体的な例はこちら</p>
<div class="remark-highlight"><pre class="language-tsx pre"><code class="language-tsx code"><span class="token keyword">interface</span> <span class="token class-name">WithHoge</span> <span class="token punctuation">{</span>
  hoge<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token generic-function"><span class="token function">withHoge</span><span class="token generic class-name"><span class="token operator">&#x3C;</span><span class="token constant">P</span> <span class="token keyword">extends</span> WithHoge<span class="token operator">></span></span></span><span class="token punctuation">(</span>
    <span class="token maybe-class-name">Component</span><span class="token operator">:</span> <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">ComponentType</span></span><span class="token operator">&#x3C;</span><span class="token constant">P</span><span class="token operator">></span>
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token constant">FC</span><span class="token operator">&#x3C;</span><span class="token maybe-class-name">Omit</span><span class="token operator">&#x3C;</span><span class="token constant">P</span><span class="token punctuation">,</span> <span class="token keyword">keyof</span> <span class="token maybe-class-name">WithHoge</span><span class="token operator">>></span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> inProps <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token spread operator">...</span>props<span class="token punctuation">,</span> hoge<span class="token operator">:</span> <span class="token string">'value'</span> <span class="token punctuation">}</span> <span class="token keyword">as</span> <span class="token constant">P</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span><span class="token class-name">Component</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token punctuation">...</span><span class="token attr-value">inProps</span><span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div>
<p class="paragraph">このようなHOCを作ったりする場合は、
関数コンポーネントでもクラスコンポーネントでもよいのでComponentTypeを利用すると良いです。
その他にもコンポーネントそのものを受け渡す場合はこちら利用していきましょう。</p>
<h4 class="heading lv-4">React.ReactNode</h4>
<p class="paragraph"><code class="code">React.Component</code>の<code class="code">render()</code>の戻り値など色んな所で登場してくる<code class="code">React.ReactNode</code>。
簡単に言うと「JSXの中で存在できる要素」を指します。(この表現が正しいかはあやしい)</p>
<div class="has-filename"><div class="filename">型定義</div><pre class="language-ts pre"><code class="language-ts code"><span class="token keyword">type</span> <span class="token class-name">ReactNode</span> <span class="token operator">=</span> ReactChild <span class="token operator">|</span> ReactFragment <span class="token operator">|</span> ReactPortal <span class="token operator">|</span> <span class="token builtin">boolean</span> <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>

<span class="token comment">// 関連↓</span>
<span class="token keyword">type</span> <span class="token class-name">ReactText</span> <span class="token operator">=</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">ReactChild</span> <span class="token operator">=</span> ReactElement <span class="token operator">|</span> ReactText<span class="token punctuation">;</span>
</code></pre></div>
<p class="paragraph">コンポーネントでも文字列でも数字でもなんでも来い！っていう定義で
「とにかくJSXの中に突っ込みたいけど型がバラバラ」といった場合に活躍します。</p>
<p class="paragraph"><strong>ちなみに</strong>
関数コンポーネント(<code class="code">FunctionComponent</code>)の戻り値は<code class="code">ReactElement</code>です。
なので<code class="code">undefined</code>や数値など適当なものは返却できないようになっています。
（Component.renderはできるのに）</p>
<h4 class="heading lv-4">React.ComponentProps</h4>
<p class="paragraph">これは便利な型として紹介いたします。
コンポーネントからPropsのを抜き出す際に利用します。</p>
<div class="has-filename"><div class="filename">型定義</div><pre class="language-ts pre"><code class="language-ts code"><span class="token keyword">type</span> <span class="token class-name">ComponentProps<span class="token operator">&#x3C;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token keyword">keyof</span> <span class="token constant">JSX</span><span class="token punctuation">.</span>IntrinsicElements <span class="token operator">|</span> JSXElementConstructor<span class="token operator">&#x3C;</span><span class="token builtin">any</span><span class="token operator">>></span></span> <span class="token operator">=</span>
    <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">JSXElementConstructor<span class="token operator">&#x3C;</span>infer <span class="token constant">P</span><span class="token operator">></span></span>
        <span class="token operator">?</span> <span class="token constant">P</span>
        <span class="token operator">:</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token keyword">keyof</span> <span class="token constant">JSX</span><span class="token punctuation">.</span>IntrinsicElements
            <span class="token operator">?</span> <span class="token constant">JSX</span><span class="token punctuation">.</span>IntrinsicElements<span class="token punctuation">[</span><span class="token constant">T</span><span class="token punctuation">]</span>
            <span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div>
<p class="paragraph"><code class="code">infer</code>で目的の型を抜き出しているのですが難しい定義ですね。</p>
<p class="paragraph">使用例)</p>
<div class="remark-highlight"><pre class="language-tsx pre"><code class="language-tsx code"><span class="token keyword">const</span> <span class="token function-variable function">Sample</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props<span class="token operator">:</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> string<span class="token punctuation">;</span> age<span class="token operator">:</span> number <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span></span><span class="token punctuation">></span></span><span class="token plain-text">hello</span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span></span><span class="token punctuation">></span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name">SampleProps</span> <span class="token operator">=</span> <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">ComponentProps</span></span><span class="token operator">&#x3C;</span><span class="token keyword">typeof</span> <span class="token maybe-class-name">Sample</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token comment">/*</span>
<span class="token comment">    type SampleProps = {</span>
<span class="token comment">        name: string;</span>
<span class="token comment">        age: number;</span>
<span class="token comment">    }</span>
<span class="token comment">*/</span>
</code></pre></div>
<p class="paragraph">このようにコンポーネントからPropsの型を抜き出すことができました。
利用しているライブラリで<code class="code">Props</code>が公開されていない場合でも型を抜き出すことができるので重宝します。</p>
<h4 class="heading lv-4">React.ReactDOM</h4>
<p class="paragraph">こちらは自作のコンポーネントではなく<code class="code">div</code>や<code class="code">input</code>などのHTML,SVGタグの定義となります。</p>
<div class="has-filename"><div class="filename">型定義</div><pre class="language-ts pre"><code class="language-ts code"><span class="token keyword">interface</span> <span class="token class-name">ReactDOM</span> <span class="token keyword">extends</span> <span class="token class-name">ReactHTML</span><span class="token punctuation">,</span> ReactSVG <span class="token punctuation">{</span> <span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">ReactHTML</span> <span class="token punctuation">{</span>
    a<span class="token operator">:</span> DetailedHTMLFactory<span class="token operator">&#x3C;</span>AnchorHTMLAttributes<span class="token operator">&#x3C;</span>HTMLAnchorElement<span class="token operator">></span><span class="token punctuation">,</span> HTMLAnchorElement<span class="token operator">></span><span class="token punctuation">;</span>
    abbr<span class="token operator">:</span> DetailedHTMLFactory<span class="token operator">&#x3C;</span>HTMLAttributes<span class="token operator">&#x3C;</span>HTMLElement<span class="token operator">></span><span class="token punctuation">,</span> HTMLElement<span class="token operator">></span><span class="token punctuation">;</span>
    address<span class="token operator">:</span> DetailedHTMLFactory<span class="token operator">&#x3C;</span>HTMLAttributes<span class="token operator">&#x3C;</span>HTMLElement<span class="token operator">></span><span class="token punctuation">,</span> HTMLElement<span class="token operator">></span><span class="token punctuation">;</span>
    <span class="token operator">...</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">ReactSVG</span> <span class="token punctuation">{</span>
    animate<span class="token operator">:</span> SVGFactory<span class="token punctuation">;</span>
    circle<span class="token operator">:</span> SVGFactory<span class="token punctuation">;</span>
    <span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre></div>
<p class="paragraph">これを単体で使うことはあまりないのですが<code class="code">ComponentProps</code>と組み合わせると以下のようなことが可能です。</p>
<div class="remark-highlight"><pre class="language-tsx pre"><code class="language-tsx code"><span class="token keyword">type</span> <span class="token class-name">Div</span> <span class="token operator">=</span> <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">ReactDOM</span></span><span class="token punctuation">[</span><span class="token string">'div'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">DivProps</span> <span class="token operator">=</span> <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">ComponentProps</span></span><span class="token operator">&#x3C;</span><span class="token maybe-class-name">Div</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token keyword">const</span> props<span class="token operator">:</span> <span class="token maybe-class-name">DivProps</span> <span class="token operator">=</span> <span class="token punctuation">{</span> className<span class="token operator">:</span> <span class="token string">'class-name'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span> <span class="token spread"><span class="token punctuation">{</span><span class="token punctuation">...</span><span class="token attr-value">props</span><span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span>
</code></pre></div>
<p class="paragraph">自作コンポーネントじゃないタグに動的な<code class="code">props</code>を設定したいとき、
型安全な変数として定義することができます。</p>
<p class="paragraph">このようなショートハンドの型を定義するともっと使いやすくなりそうです。</p>
<div class="remark-highlight"><pre class="language-ts pre"><code class="language-ts code"><span class="token keyword">type</span> <span class="token class-name">DOMProps<span class="token operator">&#x3C;</span><span class="token constant">E</span> <span class="token keyword">extends</span> <span class="token keyword">keyof</span> React<span class="token punctuation">.</span>ReactDOM<span class="token operator">></span></span> <span class="token operator">=</span> React<span class="token punctuation">.</span>ComponentProps<span class="token operator">&#x3C;</span>React<span class="token punctuation">.</span>ReactDOM<span class="token punctuation">[</span><span class="token constant">E</span><span class="token punctuation">]</span><span class="token operator">></span><span class="token punctuation">;</span>

<span class="token comment">// 使う</span>
<span class="token keyword">type</span> <span class="token class-name">DivProps</span> <span class="token operator">=</span> DOMProps<span class="token operator">&#x3C;</span><span class="token string">'div'</span><span class="token operator">></span><span class="token punctuation">;</span>

</code></pre></div>
<h4 class="heading lv-4">追記</h4>
<p class="paragraph"><code class="code">JSX.IntrinsicElements</code>という型が存在しており
これを使うことで上記と同じようなことができます。
そしてどうやら<code class="code">IntrinsicElements</code>のほうがスタンダードのようです...!</p>
<h2 class="heading lv-2">まとめ</h2>
<p class="paragraph">実際にはコンポーネントの型定義が他にもいくつかあって複雑に絡み合っているのですが
今回はこのあたりのよく目にする部分のみをまとめてみました。(時間がなかった)</p>
<p class="paragraph">Reactなど関数的な考え方を持ち込んでいるライブラリは型定義が面白かったりと勉強になるので
皆さんもぜひ読んでみてはいかがでしょうか。</p>
<hr>
<p class="paragraph">おしまい</p></div></article></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":"{\"slug\":\"read__types_react\",\"title\":\"@types/react の中を少し読んでみる\",\"publishedAt\":\"2019-12-13T23:32:19.000Z\",\"description\":\"Reactの型定義として提供されている'@types/react'の実装を読んでみて解説です。\",\"tags\":[\"React\",\"TypeScript\"]}","content":"\u003ch2 class=\"heading lv-2\"\u003e注意\u003c/h2\u003e\n\u003cp class=\"paragraph\"\u003eこの記事は2019/12時点の記事です。\nReactのバージョンも上がり\u003ccode class=\"code\"\u003eReact.VFC\u003c/code\u003eなども登場しているのでご注意ください\u003c/p\u003e\n\u003ch2 class=\"heading lv-2\"\u003eはじめに\u003c/h2\u003e\n\u003cp class=\"paragraph\"\u003eここ最近はTypeScriptを利用することがデファクトスタンダードになりつつありますね。\nそこでその際に必要になるReactの型定義(\u003ccode class=\"code\"\u003e@types/react\u003c/code\u003e)について色々おさらいしてみます。\u003c/p\u003e\n\u003cp class=\"paragraph\"\u003e対象のパッケージは\u003ca href=\"https://www.npmjs.com/package/@types/react\" class=\"anchor\" rel=\"noopener noreferrer\" target=\"_blank\"\u003eこちら\u003c/a\u003e\u003c/p\u003e\n\u003cp class=\"paragraph\"\u003enpm: \u003ca href=\"https://www.npmjs.com/package/@types/react\" class=\"anchor\" rel=\"noopener noreferrer\" target=\"_blank\"\u003ehttps://www.npmjs.com/package/@types/react\u003c/a\u003e\nGitHub: \u003ca href=\"https://github.com/DefinitelyTyped/DefinitelyTyped/tree/master/types/react\" class=\"anchor\" rel=\"noopener noreferrer\" target=\"_blank\"\u003ehttps://github.com/DefinitelyTyped/DefinitelyTyped/tree/master/types/react\u003c/a\u003e\u003c/p\u003e\n\u003ch2 class=\"heading lv-2\"\u003e解説\u003c/h2\u003e\n\u003cp class=\"paragraph\"\u003e\u003ccode class=\"code\"\u003e@types/react\u003c/code\u003eでは\u003ccode class=\"code\"\u003eglobal.d.ts\u003c/code\u003eと\u003ccode class=\"code\"\u003eindex.d.ts\u003c/code\u003eの２つのファイルが提供されていますので\nそれぞれを見ていきましょう。\u003c/p\u003e\n\u003ch3 class=\"heading lv-3\"\u003e\u003ccode class=\"code\"\u003eglobal.d.ts\u003c/code\u003e\u003c/h3\u003e\n\u003cp class=\"paragraph\"\u003e\u003ca href=\"https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/react/global.d.ts\" class=\"anchor\" rel=\"noopener noreferrer\" target=\"_blank\"\u003ehttps://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/react/global.d.ts\u003c/a\u003e\u003c/p\u003e\n\u003cp class=\"paragraph\"\u003e見てみるとわかるのですが空のinterface定義が並んでいます。\nそしてファイルの先頭に下記のコメントが。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-ts pre\"\u003e\u003ccode class=\"language-ts code\"\u003e\u003cspan class=\"token comment\"\u003e/*\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003eReact projects that don't include the DOM library need these interfaces to compile.\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003eReact Native applications use React, but there is no DOM available. The JavaScript runtime\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003eis ES6/ES2015 only. These definitions allow such projects to compile with only `--lib ES6`.\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003eWarning: all of these interfaces are empty. If you want type definitions for various properties\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e(such as HTMLInputElement.prototype.value), you need to add `--lib DOM` (via command line or tsconfig.json).\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e*/\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp class=\"paragraph\"\u003e適当に訳すと\n「これらの定義を用意することで\u003ccode class=\"code\"\u003elib.dom\u003c/code\u003eを読み込まなくてもコンパイルできるようになります」\n「ただし、\b空の定義なのでプロパティなどにアクセスしたいのならちゃんと読み込んでね」\nってことみたいです。\u003c/p\u003e\n\u003cp class=\"paragraph\"\u003e大体は\u003ccode class=\"code\"\u003elib.dom\u003c/code\u003eを読み込むと思うのでこのファイルはあまり気にしなくていいかもしれません。\u003c/p\u003e\n\u003ch3 class=\"heading lv-3\"\u003e\u003ccode class=\"code\"\u003eindex.d.ts\u003c/code\u003e\u003c/h3\u003e\n\u003cp class=\"paragraph\"\u003e\u003ca href=\"https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/react/index.d.ts\" class=\"anchor\" rel=\"noopener noreferrer\" target=\"_blank\"\u003ehttps://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/react/index.d.ts\u003c/a\u003e\u003c/p\u003e\n\u003cp class=\"paragraph\"\u003eそれではReact本体の型定義を見ていきます。\n今回紹介する定義は以下になります。\u003c/p\u003e\n\u003cul class=\"list unordered\"\u003e\n\u003cli\u003e\u003ca href=\"#reactcomponent\" class=\"anchor\"\u003eReact.Component\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#reactcomponentclass\" class=\"anchor\"\u003eReact.ComponentClass\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#reactfunctioncomponent\" class=\"anchor\"\u003eReact.FunctionComponent\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#reactcomponenttype\" class=\"anchor\"\u003eReact.ComponentType\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#reactcomponentprops\" class=\"anchor\"\u003eReact.ComponentProps\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#reactreactnode\" class=\"anchor\"\u003eReact.ReactNode\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#reactcomponentprops\" class=\"anchor\"\u003eReact.ComponentProps\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#reactreactdom\" class=\"anchor\"\u003eReact.ReactDOM\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 class=\"heading lv-4\"\u003eReact.Component\u003c/h4\u003e\n\u003cp class=\"paragraph\"\u003e言わずとしれたクラスコンポーネントの型です。\n正確にはクラスなのですが重要なのでとりあげます。\u003c/p\u003e\n\u003cdiv class=\"has-filename\"\u003e\u003cdiv class=\"filename\"\u003e型定義\u003c/div\u003e\u003cpre class=\"language-ts pre\"\u003e\u003ccode class=\"language-ts code\"\u003e\u003cspan class=\"token keyword\"\u003einterface\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eComponent\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token constant\"\u003eP\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token constant\"\u003eS\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token constant\"\u003eSS\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token builtin\"\u003eany\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eextends\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eComponentLifecycle\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token constant\"\u003eP\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token constant\"\u003eS\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token constant\"\u003eSS\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp class=\"paragraph\"\u003e実際はクラスなので継承して使うことになります。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-tsx pre\"\u003e\u003ccode class=\"language-tsx code\"\u003e\u003cspan class=\"token keyword\"\u003etype\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eProps\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003etype\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eState\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eSample\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eextends\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eReact\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003e\u003cspan class=\"token maybe-class-name\"\u003eComponent\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token maybe-class-name\"\u003eProps\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eState\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp class=\"paragraph\"\u003eこれで\u003ccode class=\"code\"\u003ethis.props\u003c/code\u003eや\u003ccode class=\"code\"\u003ethis.state\u003c/code\u003e,\u003ccode class=\"code\"\u003ethis.setState\u003c/code\u003eなどが型安全になりました。\u003c/p\u003e\n\u003ch5 class=\"heading lv-5\"\u003econtextType\u003c/h5\u003e\n\u003cp class=\"paragraph\"\u003eクラスの定義をよく読むとこんな記述が。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-tsx pre\"\u003e\u003ccode class=\"language-tsx code\"\u003e\u003cspan class=\"token keyword\"\u003estatic\u003c/span\u003e contextType\u003cspan class=\"token operator\"\u003e?\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eContext\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token builtin\"\u003eany\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\ncontext\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003eany\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp class=\"paragraph\"\u003eこれはContextAPIをクラスコンポーネントで利用する際の型定義になるのですが\n\u003ccode class=\"code\"\u003eany\u003c/code\u003eと書かれているので実際に使う際は以下のようにしてあげましょう。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-tsx pre\"\u003e\u003ccode class=\"language-tsx code\"\u003e\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e hogeCtx \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eReact\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003ecreateContext\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e count\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eChild\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eextends\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eReact\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003e\u003cspan class=\"token maybe-class-name\"\u003eComponent\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token maybe-class-name\"\u003eProps\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eState\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003estatic\u003c/span\u003e contextType \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e hogeCtx\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    context\u003cspan class=\"token operator\"\u003e!\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eReact\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003e\u003cspan class=\"token maybe-class-name\"\u003eContextType\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token keyword\"\u003etypeof\u003c/span\u003e hogeCtx\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"token function\"\u003erender\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003eh1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token keyword\"\u003ethis\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003econtext\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003ecount\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003eh1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp class=\"paragraph\"\u003eTypeScript3.7以降であれば以下の書き方になります\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-tsx pre\"\u003e\u003ccode class=\"language-tsx code\"\u003e\u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eChild\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eextends\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eReact\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003e\u003cspan class=\"token maybe-class-name\"\u003eComponent\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token maybe-class-name\"\u003eProps\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eState\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003estatic\u003c/span\u003e contextType \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e hogeCtx\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003edeclare\u003c/span\u003e context\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eReact\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003e\u003cspan class=\"token maybe-class-name\"\u003eContextType\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token keyword\"\u003etypeof\u003c/span\u003e hogeCtx\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\n    \u003cspan class=\"token comment\"\u003e// ↑ここが変数の再定義ではなく型の定義のみでよい\u003c/span\u003e\n    \u003cspan class=\"token spread operator\"\u003e...\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp class=\"paragraph\"\u003eこうすることで \u003ccode class=\"code\"\u003ethis.context\u003c/code\u003e が型安全に利用することができます。\u003c/p\u003e\n\u003ch5 class=\"heading lv-5\"\u003e注記\u003c/h5\u003e\n\u003cp class=\"paragraph\"\u003eReact 16.3より前から存在する\u003ccode class=\"code\"\u003eLegacy Context\u003c/code\u003eについても同様に\u003ccode class=\"code\"\u003ethis.context\u003c/code\u003eを利用していました。\nその場合は\u003ccode class=\"code\"\u003econtextType\u003c/code\u003eの定義はせず\u003ccode class=\"code\"\u003eany\u003c/code\u003eのまま利用するほうが良いかと思います。\u003c/p\u003e\n\u003ch4 class=\"heading lv-4\"\u003eReact.ComponentClass\u003c/h4\u003e\n\u003cp class=\"paragraph\"\u003eこれは\u003ccode class=\"code\"\u003eReact.Component\u003c/code\u003eなどのインターフェースになります。\u003c/p\u003e\n\u003cdiv class=\"has-filename\"\u003e\u003cdiv class=\"filename\"\u003e型定義\u003c/div\u003e\u003cpre class=\"language-ts pre\"\u003e\u003ccode class=\"language-ts code\"\u003e\u003cspan class=\"token keyword\"\u003einterface\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eComponentClass\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token constant\"\u003eP\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token constant\"\u003eS\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e ComponentState\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eextends\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eStaticLifecycle\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token constant\"\u003eP\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token constant\"\u003eS\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eprops\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token constant\"\u003eP\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e context\u003cspan class=\"token operator\"\u003e?\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003eany\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e Component\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token constant\"\u003eP\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token constant\"\u003eS\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    propTypes\u003cspan class=\"token operator\"\u003e?\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e WeakValidationMap\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token constant\"\u003eP\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    contextType\u003cspan class=\"token operator\"\u003e?\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e Context\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token builtin\"\u003eany\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    contextTypes\u003cspan class=\"token operator\"\u003e?\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e ValidationMap\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token builtin\"\u003eany\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    childContextTypes\u003cspan class=\"token operator\"\u003e?\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e ValidationMap\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token builtin\"\u003eany\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    defaultProps\u003cspan class=\"token operator\"\u003e?\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e Partial\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token constant\"\u003eP\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    displayName\u003cspan class=\"token operator\"\u003e?\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003estring\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp class=\"paragraph\"\u003eクラスとインターフェースと何が違うのかというと言語化が難しいのですが以下のような挙動になります。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-tsx pre\"\u003e\u003ccode class=\"language-tsx code\"\u003e\u003cspan class=\"token keyword\"\u003etype\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eProps\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eHoge\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eextends\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eReact\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003e\u003cspan class=\"token maybe-class-name\"\u003eComponent\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token maybe-class-name\"\u003eProps\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e hoge\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eHoge\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eHoge\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// これはエラー\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e hogeType\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eReact\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003e\u003cspan class=\"token maybe-class-name\"\u003eComponentClass\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token maybe-class-name\"\u003eProps\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eHoge\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp class=\"paragraph\"\u003eクラスにするということはインスタンスの型となるため、\n純粋なコンポーネントのインターフェースが欲しい場合はこちらの型を使うことになります。\n具体的な利用例は後述する\u003ccode class=\"code\"\u003eReact.ComponentType\u003c/code\u003eでご紹介します。\u003c/p\u003e\n\u003ch4 class=\"heading lv-4\"\u003eReact.FunctionComponent\u003c/h4\u003e\n\u003cp class=\"paragraph\"\u003e関数型コンポーネントの型となる\u003ccode class=\"code\"\u003eFunctionComponent\u003c/code\u003eです。\n最近はクラスコンポーネントよりもこちらのほうが主流ですね。\u003c/p\u003e\n\u003cp class=\"paragraph\"\u003eエイリアスとして\u003ccode class=\"code\"\u003eReact.FC\u003c/code\u003eというものもあります。（私は短いほうが好きなのでこちらを多用しています\u003c/p\u003e\n\u003cdiv class=\"has-filename\"\u003e\u003cdiv class=\"filename\"\u003e型定義\u003c/div\u003e\u003cpre class=\"language-ts pre\"\u003e\u003ccode class=\"language-ts code\"\u003e\u003cspan class=\"token keyword\"\u003einterface\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eFunctionComponent\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token constant\"\u003eP\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eprops\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e PropsWithChildren\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token constant\"\u003eP\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e context\u003cspan class=\"token operator\"\u003e?\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003eany\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e ReactElement \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enull\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    propTypes\u003cspan class=\"token operator\"\u003e?\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e WeakValidationMap\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token constant\"\u003eP\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    contextTypes\u003cspan class=\"token operator\"\u003e?\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e ValidationMap\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token builtin\"\u003eany\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    defaultProps\u003cspan class=\"token operator\"\u003e?\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e Partial\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token constant\"\u003eP\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    displayName\u003cspan class=\"token operator\"\u003e?\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003estring\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003etype\u003c/span\u003e \u003cspan class=\"token class-name\"\u003e\u003cspan class=\"token constant\"\u003eFC\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token constant\"\u003eP\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e FunctionComponent\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token constant\"\u003eP\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp class=\"paragraph\"\u003eここではそれぞれのプロパティについて説明します。\u003c/p\u003e\n\u003ch5 class=\"heading lv-5\"\u003e関数本体\u003c/h5\u003e\n\u003cp class=\"paragraph\"\u003e関数の第２引数は\u003ccode class=\"code\"\u003eLegacy Context\u003c/code\u003eの値になるので最近だと利用することはないです。\n(非推奨なのでanyのまま放置されているのだと思います)\u003c/p\u003e\n\u003ch5 class=\"heading lv-5\"\u003epropsTypes\u003c/h5\u003e\n\u003cp class=\"paragraph\"\u003e\u003ccode class=\"code\"\u003epropsTypes\u003c/code\u003eもありますがTypeScriptの場合はコンパイルエラーでカバーできるので\nわざわざ記述することはなくなりました。\u003c/p\u003e\n\u003ch5 class=\"heading lv-5\"\u003econtextTypes\u003c/h5\u003e\n\u003cp class=\"paragraph\"\u003e\u003ccode class=\"code\"\u003econtextTypes\u003c/code\u003eについても\u003ccode class=\"code\"\u003eLegacy Context\u003c/code\u003e関連なので無視！\u003c/p\u003e\n\u003ch5 class=\"heading lv-5\"\u003edefaultProps\u003c/h5\u003e\n\u003cp class=\"paragraph\"\u003eこちらは\u003ccode class=\"code\"\u003eprops\u003c/code\u003eに対してデフォルト値を与えるものになります（そのまま\n個人的には\u003ccode class=\"code\"\u003edefaultProps\u003c/code\u003eで定義した項目はoptionalじゃなくできるようになってほしいです...\u003c/p\u003e\n\u003ch5 class=\"heading lv-5\"\u003edisplayName\u003c/h5\u003e\n\u003cp class=\"paragraph\"\u003eこれを設定しておくことでデバッグ時などにコンポーネント名として表示してくれます。\nminify時に関数名などは消えてしまいデバッグが辛いので極力設定しましょう!\u003c/p\u003e\n\u003cp class=\"paragraph\"\u003e\u003cstrong\u003eちなみに\u003c/strong\u003e\nHooksが出てくるまでは\u003ccode class=\"code\"\u003eStatelessFunctionComponent\u003c/code\u003e(\u003ccode class=\"code\"\u003eSFC\u003c/code\u003e)というものがありましたが\n現在は非推奨になっているためこちらに切り替えましょう。\u003c/p\u003e\n\u003ch4 class=\"heading lv-4\"\u003eReact.ComponentType\u003c/h4\u003e\n\u003cp class=\"paragraph\"\u003eまずは型定義\u003c/p\u003e\n\u003cdiv class=\"has-filename\"\u003e\u003cdiv class=\"filename\"\u003e型定義\u003c/div\u003e\u003cpre class=\"language-ts pre\"\u003e\u003ccode class=\"language-ts code\"\u003e\u003cspan class=\"token keyword\"\u003etype\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eComponentType\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token constant\"\u003eP\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e ComponentClass\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token constant\"\u003eP\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e FunctionComponent\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token constant\"\u003eP\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp class=\"paragraph\"\u003e上記で説明した「クラスコンポーネントor関数コンポーネント」という型で、\n「とにかくコンポーネントがほしい！！」って場合に利用します。\n具体的な例はこちら\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-tsx pre\"\u003e\u003ccode class=\"language-tsx code\"\u003e\u003cspan class=\"token keyword\"\u003einterface\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eWithHoge\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  hoge\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003estring\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token generic-function\"\u003e\u003cspan class=\"token function\"\u003ewithHoge\u003c/span\u003e\u003cspan class=\"token generic class-name\"\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token constant\"\u003eP\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eextends\u003c/span\u003e WithHoge\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\n    \u003cspan class=\"token maybe-class-name\"\u003eComponent\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eReact\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003e\u003cspan class=\"token maybe-class-name\"\u003eComponentType\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token constant\"\u003eP\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eReact\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token constant\"\u003eFC\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token maybe-class-name\"\u003eOmit\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token constant\"\u003eP\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token keyword\"\u003ekeyof\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eWithHoge\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token parameter\"\u003eprops\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token arrow operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e inProps \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token spread operator\"\u003e...\u003c/span\u003eprops\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e hoge\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e'value'\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eas\u003c/span\u003e \u003cspan class=\"token constant\"\u003eP\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eComponent\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token spread\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e...\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003einProps\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e/\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp class=\"paragraph\"\u003eこのようなHOCを作ったりする場合は、\n関数コンポーネントでもクラスコンポーネントでもよいのでComponentTypeを利用すると良いです。\nその他にもコンポーネントそのものを受け渡す場合はこちら利用していきましょう。\u003c/p\u003e\n\u003ch4 class=\"heading lv-4\"\u003eReact.ReactNode\u003c/h4\u003e\n\u003cp class=\"paragraph\"\u003e\u003ccode class=\"code\"\u003eReact.Component\u003c/code\u003eの\u003ccode class=\"code\"\u003erender()\u003c/code\u003eの戻り値など色んな所で登場してくる\u003ccode class=\"code\"\u003eReact.ReactNode\u003c/code\u003e。\n簡単に言うと「JSXの中で存在できる要素」を指します。(この表現が正しいかはあやしい)\u003c/p\u003e\n\u003cdiv class=\"has-filename\"\u003e\u003cdiv class=\"filename\"\u003e型定義\u003c/div\u003e\u003cpre class=\"language-ts pre\"\u003e\u003ccode class=\"language-ts code\"\u003e\u003cspan class=\"token keyword\"\u003etype\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eReactNode\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e ReactChild \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e ReactFragment \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e ReactPortal \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e \u003cspan class=\"token builtin\"\u003eboolean\u003c/span\u003e \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enull\u003c/span\u003e \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eundefined\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e// 関連↓\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003etype\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eReactText\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token builtin\"\u003estring\u003c/span\u003e \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e \u003cspan class=\"token builtin\"\u003enumber\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003etype\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eReactChild\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e ReactElement \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e ReactText\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp class=\"paragraph\"\u003eコンポーネントでも文字列でも数字でもなんでも来い！っていう定義で\n「とにかくJSXの中に突っ込みたいけど型がバラバラ」といった場合に活躍します。\u003c/p\u003e\n\u003cp class=\"paragraph\"\u003e\u003cstrong\u003eちなみに\u003c/strong\u003e\n関数コンポーネント(\u003ccode class=\"code\"\u003eFunctionComponent\u003c/code\u003e)の戻り値は\u003ccode class=\"code\"\u003eReactElement\u003c/code\u003eです。\nなので\u003ccode class=\"code\"\u003eundefined\u003c/code\u003eや数値など適当なものは返却できないようになっています。\n（Component.renderはできるのに）\u003c/p\u003e\n\u003ch4 class=\"heading lv-4\"\u003eReact.ComponentProps\u003c/h4\u003e\n\u003cp class=\"paragraph\"\u003eこれは便利な型として紹介いたします。\nコンポーネントからPropsのを抜き出す際に利用します。\u003c/p\u003e\n\u003cdiv class=\"has-filename\"\u003e\u003cdiv class=\"filename\"\u003e型定義\u003c/div\u003e\u003cpre class=\"language-ts pre\"\u003e\u003ccode class=\"language-ts code\"\u003e\u003cspan class=\"token keyword\"\u003etype\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eComponentProps\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token constant\"\u003eT\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eextends\u003c/span\u003e \u003cspan class=\"token keyword\"\u003ekeyof\u003c/span\u003e \u003cspan class=\"token constant\"\u003eJSX\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eIntrinsicElements \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e JSXElementConstructor\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token builtin\"\u003eany\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003e\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\n    \u003cspan class=\"token constant\"\u003eT\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eextends\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eJSXElementConstructor\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003einfer \u003cspan class=\"token constant\"\u003eP\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n        \u003cspan class=\"token operator\"\u003e?\u003c/span\u003e \u003cspan class=\"token constant\"\u003eP\u003c/span\u003e\n        \u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token constant\"\u003eT\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eextends\u003c/span\u003e \u003cspan class=\"token keyword\"\u003ekeyof\u003c/span\u003e \u003cspan class=\"token constant\"\u003eJSX\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eIntrinsicElements\n            \u003cspan class=\"token operator\"\u003e?\u003c/span\u003e \u003cspan class=\"token constant\"\u003eJSX\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eIntrinsicElements\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token constant\"\u003eT\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\n            \u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp class=\"paragraph\"\u003e\u003ccode class=\"code\"\u003einfer\u003c/code\u003eで目的の型を抜き出しているのですが難しい定義ですね。\u003c/p\u003e\n\u003cp class=\"paragraph\"\u003e使用例)\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-tsx pre\"\u003e\u003ccode class=\"language-tsx code\"\u003e\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"token function-variable function\"\u003eSample\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token parameter\"\u003eprops\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e name\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e string\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e age\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e number \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token arrow operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token plain-text\"\u003ehello\u003c/span\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003etype\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eSampleProps\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eReact\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003e\u003cspan class=\"token maybe-class-name\"\u003eComponentProps\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token keyword\"\u003etypeof\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eSample\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e/*\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e    type SampleProps = {\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e        name: string;\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e        age: number;\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e    }\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e*/\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp class=\"paragraph\"\u003eこのようにコンポーネントからPropsの型を抜き出すことができました。\n利用しているライブラリで\u003ccode class=\"code\"\u003eProps\u003c/code\u003eが公開されていない場合でも型を抜き出すことができるので重宝します。\u003c/p\u003e\n\u003ch4 class=\"heading lv-4\"\u003eReact.ReactDOM\u003c/h4\u003e\n\u003cp class=\"paragraph\"\u003eこちらは自作のコンポーネントではなく\u003ccode class=\"code\"\u003ediv\u003c/code\u003eや\u003ccode class=\"code\"\u003einput\u003c/code\u003eなどのHTML,SVGタグの定義となります。\u003c/p\u003e\n\u003cdiv class=\"has-filename\"\u003e\u003cdiv class=\"filename\"\u003e型定義\u003c/div\u003e\u003cpre class=\"language-ts pre\"\u003e\u003ccode class=\"language-ts code\"\u003e\u003cspan class=\"token keyword\"\u003einterface\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eReactDOM\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eextends\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eReactHTML\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e ReactSVG \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003einterface\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eReactHTML\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    a\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e DetailedHTMLFactory\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003eAnchorHTMLAttributes\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003eHTMLAnchorElement\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e HTMLAnchorElement\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    abbr\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e DetailedHTMLFactory\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003eHTMLAttributes\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003eHTMLElement\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e HTMLElement\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    address\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e DetailedHTMLFactory\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003eHTMLAttributes\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003eHTMLElement\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e HTMLElement\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token operator\"\u003e...\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003einterface\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eReactSVG\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    animate\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e SVGFactory\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    circle\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e SVGFactory\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token operator\"\u003e...\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp class=\"paragraph\"\u003eこれを単体で使うことはあまりないのですが\u003ccode class=\"code\"\u003eComponentProps\u003c/code\u003eと組み合わせると以下のようなことが可能です。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-tsx pre\"\u003e\u003ccode class=\"language-tsx code\"\u003e\u003cspan class=\"token keyword\"\u003etype\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eDiv\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eReact\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003e\u003cspan class=\"token maybe-class-name\"\u003eReactDOM\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token string\"\u003e'div'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003etype\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eDivProps\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eReact\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003e\u003cspan class=\"token maybe-class-name\"\u003eComponentProps\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token maybe-class-name\"\u003eDiv\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e props\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eDivProps\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e className\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e'class-name'\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003ediv\u003c/span\u003e \u003cspan class=\"token spread\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e...\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003eprops\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e/\u003e\u003c/span\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp class=\"paragraph\"\u003e自作コンポーネントじゃないタグに動的な\u003ccode class=\"code\"\u003eprops\u003c/code\u003eを設定したいとき、\n型安全な変数として定義することができます。\u003c/p\u003e\n\u003cp class=\"paragraph\"\u003eこのようなショートハンドの型を定義するともっと使いやすくなりそうです。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-ts pre\"\u003e\u003ccode class=\"language-ts code\"\u003e\u003cspan class=\"token keyword\"\u003etype\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eDOMProps\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token constant\"\u003eE\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eextends\u003c/span\u003e \u003cspan class=\"token keyword\"\u003ekeyof\u003c/span\u003e React\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eReactDOM\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e React\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eComponentProps\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003eReact\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eReactDOM\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token constant\"\u003eE\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e// 使う\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003etype\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eDivProps\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e DOMProps\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token string\"\u003e'div'\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch4 class=\"heading lv-4\"\u003e追記\u003c/h4\u003e\n\u003cp class=\"paragraph\"\u003e\u003ccode class=\"code\"\u003eJSX.IntrinsicElements\u003c/code\u003eという型が存在しており\nこれを使うことで上記と同じようなことができます。\nそしてどうやら\u003ccode class=\"code\"\u003eIntrinsicElements\u003c/code\u003eのほうがスタンダードのようです...!\u003c/p\u003e\n\u003ch2 class=\"heading lv-2\"\u003eまとめ\u003c/h2\u003e\n\u003cp class=\"paragraph\"\u003e実際にはコンポーネントの型定義が他にもいくつかあって複雑に絡み合っているのですが\n今回はこのあたりのよく目にする部分のみをまとめてみました。(時間がなかった)\u003c/p\u003e\n\u003cp class=\"paragraph\"\u003eReactなど関数的な考え方を持ち込んでいるライブラリは型定義が面白かったりと勉強になるので\n皆さんもぜひ読んでみてはいかがでしょうか。\u003c/p\u003e\n\u003chr\u003e\n\u003cp class=\"paragraph\"\u003eおしまい\u003c/p\u003e"},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"read__types_react"},"buildId":"2TeC_BqFkmcRD1K9YUrqZ","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-51ce6eb9ed73aacaf515.js"></script><script src="/_next/static/chunks/main-8741ed3c7ec57f378f59.js" async=""></script><script src="/_next/static/chunks/webpack-95c2b224bccf352ee870.js" async=""></script><script src="/_next/static/chunks/framework.daa7383ad2ab2e6757c1.js" async=""></script><script src="/_next/static/chunks/commons.286c5ad94e4334e87283.js" async=""></script><script src="/_next/static/chunks/pages/_app-62c4ae74494db6a57e9e.js" async=""></script><script src="/_next/static/chunks/79afb1f29f0e22fb2195c114356294f95861ebcc.293ad4049eec03f4e065.js" async=""></script><script src="/_next/static/chunks/2c3b9bffc7150b37a7b3810dfcf1c0b0fac2bd18.26412b03d1df03d45396.js" async=""></script><script src="/_next/static/chunks/pages/posts/%5Bslug%5D-d84c8237cab24ecd19e3.js" async=""></script><script src="/_next/static/2TeC_BqFkmcRD1K9YUrqZ/_buildManifest.js" async=""></script><script src="/_next/static/2TeC_BqFkmcRD1K9YUrqZ/_ssgManifest.js" async=""></script></body></html>