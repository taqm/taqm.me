<!DOCTYPE html><html lang="ja"><head><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-X38HKLJWTQ"></script><script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-X38HKLJWTQ', { page_path: window.location.pathname, }); </script><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><meta name="robots" content="nofollow noindex"/><title>Reactでよく使う classnames を置き換えるライブラリ。その名も「clsx」 | taqm&#x27;s blog</title><meta name="keywords" content="JavaScript,React"/><meta name="description" content="妥当classnamesとして作られた[clsx]というライブラリが登場していたので紹介してみます。"/><meta property="og:url" content="https://taqm.me/posts/clsx_introduction"/><meta property="og:type" content="article"/><meta property="og:title" content="Reactでよく使う classnames を置き換えるライブラリ。その名も「clsx」 | taqm&amp;apos;s blog"/><meta property="og:image" content="https://taqm.me/static/site_logo.png"/><meta property="og:description" content="妥当classnamesとして作られた[clsx]というライブラリが登場していたので紹介してみます。"/><meta property="og:site_name" content="taqm.me"/><meta name="twitter:card" content="summary"/><meta name="twitter:site" content="taqm"/><meta name="next-head-count" content="14"/><link rel="preload" href="/_next/static/css/3bd3ee853585bdba2b55.css" as="style"/><link rel="stylesheet" href="/_next/static/css/3bd3ee853585bdba2b55.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/main-8741ed3c7ec57f378f59.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-95c2b224bccf352ee870.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.daa7383ad2ab2e6757c1.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.286c5ad94e4334e87283.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-62c4ae74494db6a57e9e.js" as="script"/><link rel="preload" href="/_next/static/chunks/79afb1f29f0e22fb2195c114356294f95861ebcc.293ad4049eec03f4e065.js" as="script"/><link rel="preload" href="/_next/static/chunks/2c3b9bffc7150b37a7b3810dfcf1c0b0fac2bd18.26412b03d1df03d45396.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/posts/%5Bslug%5D-d84c8237cab24ecd19e3.js" as="script"/><style id="__jsx-2615209551">.inner.jsx-2615209551{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;height:2.5rem;}@media (min-width:640px){.inner.jsx-2615209551{-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;height:4rem;padding-left:1.5rem;padding-right:1.5rem;}}</style></head><body><div id="__next"><header class="jsx-2615209551 border-b border-gray-200 bg-white"><div class="jsx-2615209551 inner max-w-screen-lg mx-auto"><a class="jsx-2615209551 text-xl sm:text-2xl" href="/">taqm&#x27;blog</a></div></header><main class="container py-16"><article class="post-page"><div class="text-sm text-gray-500">2019-06-28</div><h1 class="text-2xl font-bold">Reactでよく使う classnames を置き換えるライブラリ。その名も「clsx」</h1><ul class="flex flex-wrap mt-2"><li class="mr-2 bg-gray-200 hover:bg-gray-300"><a class="block px-2 h-full text-sm" href="/tags/JavaScript">JavaScript</a></li><li class="mr-2 bg-gray-200 hover:bg-gray-300"><a class="block px-2 h-full text-sm" href="/tags/React">React</a></li></ul><div class="mt-10"><h2 class="heading lv-2">はじめに</h2>
<p class="paragraph">みなさんReactでクラス名を動的に設定する場合どうしてますか？
ほとんどの人が<code class="code">classnames</code>というライブラリを使っているのではないでしょうか。</p>
<p class="paragraph">ここ最近その<code class="code">classnames</code>を置き換えるようなライブラリが登場していたようなので紹介します。</p>
<h4 class="heading lv-4">classnames</h4>
<p class="paragraph">まずライブラリの紹介の前に比較対象である<code class="code">classnames</code>についてですが
Reactを利用する人ならほぼ全員が知っているであろうライブラリです。
というか<a href="https://reactjs.org/docs/faq-styling.html" class="anchor" rel="noopener noreferrer" target="_blank">公式で推奨</a>されてるんですね。</p>
<p class="paragraph"><a href="https://www.npmjs.com/package/classnames" class="anchor" rel="noopener noreferrer" target="_blank">https://www.npmjs.com/package/classnames</a></p>
<h2 class="heading lv-2">紹介</h2>
<p class="paragraph">ここからが本題</p>
<h3 class="heading lv-3">clsx</h3>
<p class="paragraph">今回紹介するのは <a href="https://www.npmjs.com/package/clsx" class="anchor" rel="noopener noreferrer" target="_blank">clsx</a> というライブラリです。
<a href="https://www.npmjs.com/package/clsx" class="anchor" rel="noopener noreferrer" target="_blank">https://www.npmjs.com/package/clsx</a></p>
<p class="paragraph">今のバージョンは1.0.4でメジャーリリースは2018/12/25。
つまり去年のクリスマス生まれのだいぶ新しいライブラリですね。:snowman2:
npmのインストールグラフを見る限り、今年の5月から爆発的に利用者が増えてきているライブラリです。</p>
<p class="paragraph">コンセプトは<strong>classnamesより小さく高速な代替品</strong>とのこと。</p>
<p class="paragraph">どうやらあの<code class="code">material-ui</code>がバンドルサイズを小さくするためにこちらに移行したようで、
それが突然ダウンロード数が爆発した要因かと思われます。</p>
<p class="paragraph"><a href="https://material-ui.com/blog/material-ui-v4-is-out/" class="anchor" rel="noopener noreferrer" target="_blank">https://material-ui.com/blog/material-ui-v4-is-out/</a></p>
<table class="table">
<thead class="thead">
<tr class="tr">
<th class="th"></th>
<th class="th">GitHub Star</th>
<th class="th">サイズ(minifed)</th>
<th class="th">サイズ（+gzip)</th>
<th class="th">参考</th>
</tr>
</thead>
<tbody class="tbody">
<tr class="tr">
<td class="td">classnames</td>
<td class="td">10,781</td>
<td class="td">588B</td>
<td class="td">371B</td>
<td class="td"><a href="https://bundlephobia.com/result?p=classnames@2.2.6" class="anchor" rel="noopener noreferrer" target="_blank">リンク</a></td>
</tr>
<tr class="tr">
<td class="td">clsx</td>
<td class="td">467</td>
<td class="td">512B</td>
<td class="td">306B</td>
<td class="td"><a href="https://bundlephobia.com/result?p=clsx@1.0.4" class="anchor" rel="noopener noreferrer" target="_blank">リンク</a></td>
</tr>
</tbody>
</table>
<p class="paragraph">バンドルサイズについてgzip時は306Bと<code class="code">classnames</code>よりも18%(65B)ほど小さくなっております。</p>
<h4 class="heading lv-4">使い方</h4>
<p class="paragraph">以下公式のコピペ</p>
<div class="remark-highlight"><pre class="language-js pre"><code class="language-js code"><span class="token keyword module">import</span> <span class="token imports">clsx</span> <span class="token keyword module">from</span> <span class="token string">'clsx'</span><span class="token punctuation">;</span>

<span class="token comment">// Strings (variadic)</span>
<span class="token function">clsx</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">,</span> <span class="token boolean">true</span> <span class="token operator">&#x26;&#x26;</span> <span class="token string">'bar'</span><span class="token punctuation">,</span> <span class="token string">'baz'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//=> 'foo bar baz'</span>

<span class="token comment">// Objects</span>
<span class="token function">clsx</span><span class="token punctuation">(</span><span class="token punctuation">{</span> foo<span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span> bar<span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span> baz<span class="token operator">:</span><span class="token function">isTrue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//=> 'foo baz'</span>

<span class="token comment">// Objects (variadic)</span>
<span class="token function">clsx</span><span class="token punctuation">(</span><span class="token punctuation">{</span> foo<span class="token operator">:</span><span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> bar<span class="token operator">:</span><span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword null nil">null</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token string">'--foobar'</span><span class="token operator">:</span><span class="token string">'hello'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//=> 'foo --foobar'</span>

<span class="token comment">// Arrays</span>
<span class="token function">clsx</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'foo'</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token string">'bar'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//=> 'foo bar'</span>

<span class="token comment">// Arrays (variadic)</span>
<span class="token function">clsx</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'foo'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token string">'bar'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'baz'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'hello'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'there'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//=> 'foo bar baz hello there'</span>

<span class="token comment">// Kitchen sink (with nesting)</span>
<span class="token function">clsx</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span> <span class="token operator">&#x26;&#x26;</span> <span class="token string">'bar'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> baz<span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span> bat<span class="token operator">:</span><span class="token keyword null nil">null</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'hello'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'world'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'cya'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//=> 'foo bar hello world cya'</span>
</code></pre></div>
<p class="paragraph">Usageの癖が強いぃ！
やりたいことはわかりますがUsageにしてはトリッキー過ぎてスッと入ってこない・・・
一言で言うとおそらく<code class="code">classnames</code>の完全互換です。（普段使いする分には実証済み）</p>
<h4 class="heading lv-4">ベンチマーク</h4>
<div class="remark-highlight"><pre class="language-unknown pre"><code class="language-unknown code"># Strings
  classcat ≠   x  8,590,994 ops/sec ±0.27% (94 runs sampled)
  classnames   x  3,987,311 ops/sec ±1.68% (94 runs sampled)
  clsx         x 11,066,632 ops/sec ±0.23% (96 runs sampled)

# Objects
  classcat ≠   x 8,566,516 ops/sec ±0.42% (97 runs sampled)
  classnames   x 3,697,182 ops/sec ±1.31% (98 runs sampled)
  clsx         x 7,147,168 ops/sec ±0.30% (95 runs sampled)

# Arrays
  classcat ≠   x 7,538,840 ops/sec ±0.56% (95 runs sampled)
  classnames   x 1,697,776 ops/sec ±1.41% (97 runs sampled)
  clsx         x 7,922,225 ops/sec ±0.18% (95 runs sampled)

# Nested Arrays
  classcat ≠   x 6,462,158 ops/sec ±0.22% (97 runs sampled)
  classnames   x 1,201,570 ops/sec ±0.22% (96 runs sampled)
  clsx         x 6,132,222 ops/sec ±0.49% (95 runs sampled)

# Nested Arrays w/ Objects
  classcat ≠   x 6,277,187 ops/sec ±0.62% (93 runs sampled)
  classnames   x 1,613,328 ops/sec ±1.69% (96 runs sampled)
  clsx         x 5,156,844 ops/sec ±0.22% (95 runs sampled)

# Mixed
  classcat ≠   x 7,073,536 ops/sec ±0.26% (95 runs sampled)
  classnames   x 2,149,952 ops/sec ±1.24% (95 runs sampled)
  clsx         x 5,577,715 ops/sec ±0.20% (93 runs sampled)

# Mixed (Bad Data)
  classcat ≠   x 1,770,852 ops/sec ±0.14% (97 runs sampled)
  classnames   x 1,148,353 ops/sec ±0.54% (97 runs sampled)
  clsx         x 1,887,010 ops/sec ±0.14% (96 runs sampled)</code></pre></div>
<p class="paragraph">今回の主役<code class="code">clsx</code>ですが<code class="code">classnames</code>と比べた結果、差が大きいものでは５倍近くのパフォーマンスがでるようです。</p>
<p class="paragraph"><strong>ちなみに</strong>
ここで<code class="code">classcat</code>というライブラリが比較対象に含まれていますね。
こちらはコンセプトは同じ「打倒<code class="code">classnames</code>」なのですがAPIの互換性がないライブラリなので
この記事では扱わないことにしています（興味がある方は調べてみてください）</p>
<h2 class="heading lv-2">まとめ</h2>
<p class="paragraph">個人的な感想としては使ってみてもいいかな？という感じです。</p>
<p class="paragraph">が、正直なところ置き換えるメリットもそれほど大きくないですし、
なにより<code class="code">classnames</code>に依存しているライブラリが山ほどあるので、
<code class="code">classnames</code>がデファクトスタンダードから引きずり降ろされることもないと思います。
（つまりタイトルは煽りです:sweat_smile:）</p>
<p class="paragraph">ちなみに<code class="code">classnames</code>のIssueに[「clsxっていうのが最近出てきたけどこのままでよいのか?」]
(<a href="https://github.com/JedWatson/classnames/issues/187)%E3%81%A8%E3%81%84%E3%81%A3%E3%81%9F%E7%89%A9%E3%82%82%E3%81%82%E3%82%8A%E3%80%81" class="anchor" rel="noopener noreferrer" target="_blank">https://github.com/JedWatson/classnames/issues/187)といった物もあり、</a>
ひょっとするとclassnamesの性能がこれからまた上がるかも知れませんね。</p>
<p class="paragraph">こうやって対抗ライブラリが出てきては比較して〜というのは面白いし学びもあるので、
みなさんも普段使っているライブラリに他の似たものがないか調べてみてはいかがでしょうか？</p>
<hr>
<p class="paragraph">おしまい</p></div></article></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":"{\"slug\":\"clsx_introduction\",\"title\":\"Reactでよく使う classnames を置き換えるライブラリ。その名も「clsx」\",\"publishedAt\":\"2019-06-28T21:51:52.000Z\",\"description\":\"妥当classnamesとして作られた[clsx]というライブラリが登場していたので紹介してみます。\",\"tags\":[\"JavaScript\",\"React\"]}","content":"\u003ch2 class=\"heading lv-2\"\u003eはじめに\u003c/h2\u003e\n\u003cp class=\"paragraph\"\u003eみなさんReactでクラス名を動的に設定する場合どうしてますか？\nほとんどの人が\u003ccode class=\"code\"\u003eclassnames\u003c/code\u003eというライブラリを使っているのではないでしょうか。\u003c/p\u003e\n\u003cp class=\"paragraph\"\u003eここ最近その\u003ccode class=\"code\"\u003eclassnames\u003c/code\u003eを置き換えるようなライブラリが登場していたようなので紹介します。\u003c/p\u003e\n\u003ch4 class=\"heading lv-4\"\u003eclassnames\u003c/h4\u003e\n\u003cp class=\"paragraph\"\u003eまずライブラリの紹介の前に比較対象である\u003ccode class=\"code\"\u003eclassnames\u003c/code\u003eについてですが\nReactを利用する人ならほぼ全員が知っているであろうライブラリです。\nというか\u003ca href=\"https://reactjs.org/docs/faq-styling.html\" class=\"anchor\" rel=\"noopener noreferrer\" target=\"_blank\"\u003e公式で推奨\u003c/a\u003eされてるんですね。\u003c/p\u003e\n\u003cp class=\"paragraph\"\u003e\u003ca href=\"https://www.npmjs.com/package/classnames\" class=\"anchor\" rel=\"noopener noreferrer\" target=\"_blank\"\u003ehttps://www.npmjs.com/package/classnames\u003c/a\u003e\u003c/p\u003e\n\u003ch2 class=\"heading lv-2\"\u003e紹介\u003c/h2\u003e\n\u003cp class=\"paragraph\"\u003eここからが本題\u003c/p\u003e\n\u003ch3 class=\"heading lv-3\"\u003eclsx\u003c/h3\u003e\n\u003cp class=\"paragraph\"\u003e今回紹介するのは \u003ca href=\"https://www.npmjs.com/package/clsx\" class=\"anchor\" rel=\"noopener noreferrer\" target=\"_blank\"\u003eclsx\u003c/a\u003e というライブラリです。\n\u003ca href=\"https://www.npmjs.com/package/clsx\" class=\"anchor\" rel=\"noopener noreferrer\" target=\"_blank\"\u003ehttps://www.npmjs.com/package/clsx\u003c/a\u003e\u003c/p\u003e\n\u003cp class=\"paragraph\"\u003e今のバージョンは1.0.4でメジャーリリースは2018/12/25。\nつまり去年のクリスマス生まれのだいぶ新しいライブラリですね。:snowman2:\nnpmのインストールグラフを見る限り、今年の5月から爆発的に利用者が増えてきているライブラリです。\u003c/p\u003e\n\u003cp class=\"paragraph\"\u003eコンセプトは\u003cstrong\u003eclassnamesより小さく高速な代替品\u003c/strong\u003eとのこと。\u003c/p\u003e\n\u003cp class=\"paragraph\"\u003eどうやらあの\u003ccode class=\"code\"\u003ematerial-ui\u003c/code\u003eがバンドルサイズを小さくするためにこちらに移行したようで、\nそれが突然ダウンロード数が爆発した要因かと思われます。\u003c/p\u003e\n\u003cp class=\"paragraph\"\u003e\u003ca href=\"https://material-ui.com/blog/material-ui-v4-is-out/\" class=\"anchor\" rel=\"noopener noreferrer\" target=\"_blank\"\u003ehttps://material-ui.com/blog/material-ui-v4-is-out/\u003c/a\u003e\u003c/p\u003e\n\u003ctable class=\"table\"\u003e\n\u003cthead class=\"thead\"\u003e\n\u003ctr class=\"tr\"\u003e\n\u003cth class=\"th\"\u003e\u003c/th\u003e\n\u003cth class=\"th\"\u003eGitHub Star\u003c/th\u003e\n\u003cth class=\"th\"\u003eサイズ(minifed)\u003c/th\u003e\n\u003cth class=\"th\"\u003eサイズ（+gzip)\u003c/th\u003e\n\u003cth class=\"th\"\u003e参考\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody class=\"tbody\"\u003e\n\u003ctr class=\"tr\"\u003e\n\u003ctd class=\"td\"\u003eclassnames\u003c/td\u003e\n\u003ctd class=\"td\"\u003e10,781\u003c/td\u003e\n\u003ctd class=\"td\"\u003e588B\u003c/td\u003e\n\u003ctd class=\"td\"\u003e371B\u003c/td\u003e\n\u003ctd class=\"td\"\u003e\u003ca href=\"https://bundlephobia.com/result?p=classnames@2.2.6\" class=\"anchor\" rel=\"noopener noreferrer\" target=\"_blank\"\u003eリンク\u003c/a\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr class=\"tr\"\u003e\n\u003ctd class=\"td\"\u003eclsx\u003c/td\u003e\n\u003ctd class=\"td\"\u003e467\u003c/td\u003e\n\u003ctd class=\"td\"\u003e512B\u003c/td\u003e\n\u003ctd class=\"td\"\u003e306B\u003c/td\u003e\n\u003ctd class=\"td\"\u003e\u003ca href=\"https://bundlephobia.com/result?p=clsx@1.0.4\" class=\"anchor\" rel=\"noopener noreferrer\" target=\"_blank\"\u003eリンク\u003c/a\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\u003cp class=\"paragraph\"\u003eバンドルサイズについてgzip時は306Bと\u003ccode class=\"code\"\u003eclassnames\u003c/code\u003eよりも18%(65B)ほど小さくなっております。\u003c/p\u003e\n\u003ch4 class=\"heading lv-4\"\u003e使い方\u003c/h4\u003e\n\u003cp class=\"paragraph\"\u003e以下公式のコピペ\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js pre\"\u003e\u003ccode class=\"language-js code\"\u003e\u003cspan class=\"token keyword module\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003eclsx\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e'clsx'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e// Strings (variadic)\u003c/span\u003e\n\u003cspan class=\"token function\"\u003eclsx\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'foo'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token boolean\"\u003etrue\u003c/span\u003e \u003cspan class=\"token operator\"\u003e\u0026#x26;\u0026#x26;\u003c/span\u003e \u003cspan class=\"token string\"\u003e'bar'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e'baz'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e//=\u003e 'foo bar baz'\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e// Objects\u003c/span\u003e\n\u003cspan class=\"token function\"\u003eclsx\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e foo\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e\u003cspan class=\"token boolean\"\u003etrue\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e bar\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e\u003cspan class=\"token boolean\"\u003efalse\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e baz\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e\u003cspan class=\"token function\"\u003eisTrue\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e//=\u003e 'foo baz'\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e// Objects (variadic)\u003c/span\u003e\n\u003cspan class=\"token function\"\u003eclsx\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e foo\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e\u003cspan class=\"token boolean\"\u003etrue\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e bar\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e\u003cspan class=\"token boolean\"\u003efalse\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token keyword null nil\"\u003enull\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token string\"\u003e'--foobar'\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e\u003cspan class=\"token string\"\u003e'hello'\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e//=\u003e 'foo --foobar'\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e// Arrays\u003c/span\u003e\n\u003cspan class=\"token function\"\u003eclsx\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token string\"\u003e'foo'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token boolean\"\u003efalse\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e'bar'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e//=\u003e 'foo bar'\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e// Arrays (variadic)\u003c/span\u003e\n\u003cspan class=\"token function\"\u003eclsx\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token string\"\u003e'foo'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token string\"\u003e''\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token boolean\"\u003efalse\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e'bar'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token string\"\u003e'baz'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token string\"\u003e'hello'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e'there'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e//=\u003e 'foo bar baz hello there'\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e// Kitchen sink (with nesting)\u003c/span\u003e\n\u003cspan class=\"token function\"\u003eclsx\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'foo'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e1\u003c/span\u003e \u003cspan class=\"token operator\"\u003e\u0026#x26;\u0026#x26;\u003c/span\u003e \u003cspan class=\"token string\"\u003e'bar'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e baz\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e\u003cspan class=\"token boolean\"\u003efalse\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e bat\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e\u003cspan class=\"token keyword null nil\"\u003enull\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token string\"\u003e'hello'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token string\"\u003e'world'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e'cya'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e//=\u003e 'foo bar hello world cya'\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp class=\"paragraph\"\u003eUsageの癖が強いぃ！\nやりたいことはわかりますがUsageにしてはトリッキー過ぎてスッと入ってこない・・・\n一言で言うとおそらく\u003ccode class=\"code\"\u003eclassnames\u003c/code\u003eの完全互換です。（普段使いする分には実証済み）\u003c/p\u003e\n\u003ch4 class=\"heading lv-4\"\u003eベンチマーク\u003c/h4\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-unknown pre\"\u003e\u003ccode class=\"language-unknown code\"\u003e# Strings\n  classcat ≠   x  8,590,994 ops/sec ±0.27% (94 runs sampled)\n  classnames   x  3,987,311 ops/sec ±1.68% (94 runs sampled)\n  clsx         x 11,066,632 ops/sec ±0.23% (96 runs sampled)\n\n# Objects\n  classcat ≠   x 8,566,516 ops/sec ±0.42% (97 runs sampled)\n  classnames   x 3,697,182 ops/sec ±1.31% (98 runs sampled)\n  clsx         x 7,147,168 ops/sec ±0.30% (95 runs sampled)\n\n# Arrays\n  classcat ≠   x 7,538,840 ops/sec ±0.56% (95 runs sampled)\n  classnames   x 1,697,776 ops/sec ±1.41% (97 runs sampled)\n  clsx         x 7,922,225 ops/sec ±0.18% (95 runs sampled)\n\n# Nested Arrays\n  classcat ≠   x 6,462,158 ops/sec ±0.22% (97 runs sampled)\n  classnames   x 1,201,570 ops/sec ±0.22% (96 runs sampled)\n  clsx         x 6,132,222 ops/sec ±0.49% (95 runs sampled)\n\n# Nested Arrays w/ Objects\n  classcat ≠   x 6,277,187 ops/sec ±0.62% (93 runs sampled)\n  classnames   x 1,613,328 ops/sec ±1.69% (96 runs sampled)\n  clsx         x 5,156,844 ops/sec ±0.22% (95 runs sampled)\n\n# Mixed\n  classcat ≠   x 7,073,536 ops/sec ±0.26% (95 runs sampled)\n  classnames   x 2,149,952 ops/sec ±1.24% (95 runs sampled)\n  clsx         x 5,577,715 ops/sec ±0.20% (93 runs sampled)\n\n# Mixed (Bad Data)\n  classcat ≠   x 1,770,852 ops/sec ±0.14% (97 runs sampled)\n  classnames   x 1,148,353 ops/sec ±0.54% (97 runs sampled)\n  clsx         x 1,887,010 ops/sec ±0.14% (96 runs sampled)\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp class=\"paragraph\"\u003e今回の主役\u003ccode class=\"code\"\u003eclsx\u003c/code\u003eですが\u003ccode class=\"code\"\u003eclassnames\u003c/code\u003eと比べた結果、差が大きいものでは５倍近くのパフォーマンスがでるようです。\u003c/p\u003e\n\u003cp class=\"paragraph\"\u003e\u003cstrong\u003eちなみに\u003c/strong\u003e\nここで\u003ccode class=\"code\"\u003eclasscat\u003c/code\u003eというライブラリが比較対象に含まれていますね。\nこちらはコンセプトは同じ「打倒\u003ccode class=\"code\"\u003eclassnames\u003c/code\u003e」なのですがAPIの互換性がないライブラリなので\nこの記事では扱わないことにしています（興味がある方は調べてみてください）\u003c/p\u003e\n\u003ch2 class=\"heading lv-2\"\u003eまとめ\u003c/h2\u003e\n\u003cp class=\"paragraph\"\u003e個人的な感想としては使ってみてもいいかな？という感じです。\u003c/p\u003e\n\u003cp class=\"paragraph\"\u003eが、正直なところ置き換えるメリットもそれほど大きくないですし、\nなにより\u003ccode class=\"code\"\u003eclassnames\u003c/code\u003eに依存しているライブラリが山ほどあるので、\n\u003ccode class=\"code\"\u003eclassnames\u003c/code\u003eがデファクトスタンダードから引きずり降ろされることもないと思います。\n（つまりタイトルは煽りです:sweat_smile:）\u003c/p\u003e\n\u003cp class=\"paragraph\"\u003eちなみに\u003ccode class=\"code\"\u003eclassnames\u003c/code\u003eのIssueに[「clsxっていうのが最近出てきたけどこのままでよいのか?」]\n(\u003ca href=\"https://github.com/JedWatson/classnames/issues/187)%E3%81%A8%E3%81%84%E3%81%A3%E3%81%9F%E7%89%A9%E3%82%82%E3%81%82%E3%82%8A%E3%80%81\" class=\"anchor\" rel=\"noopener noreferrer\" target=\"_blank\"\u003ehttps://github.com/JedWatson/classnames/issues/187)といった物もあり、\u003c/a\u003e\nひょっとするとclassnamesの性能がこれからまた上がるかも知れませんね。\u003c/p\u003e\n\u003cp class=\"paragraph\"\u003eこうやって対抗ライブラリが出てきては比較して〜というのは面白いし学びもあるので、\nみなさんも普段使っているライブラリに他の似たものがないか調べてみてはいかがでしょうか？\u003c/p\u003e\n\u003chr\u003e\n\u003cp class=\"paragraph\"\u003eおしまい\u003c/p\u003e"},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"clsx_introduction"},"buildId":"2TeC_BqFkmcRD1K9YUrqZ","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-51ce6eb9ed73aacaf515.js"></script><script src="/_next/static/chunks/main-8741ed3c7ec57f378f59.js" async=""></script><script src="/_next/static/chunks/webpack-95c2b224bccf352ee870.js" async=""></script><script src="/_next/static/chunks/framework.daa7383ad2ab2e6757c1.js" async=""></script><script src="/_next/static/chunks/commons.286c5ad94e4334e87283.js" async=""></script><script src="/_next/static/chunks/pages/_app-62c4ae74494db6a57e9e.js" async=""></script><script src="/_next/static/chunks/79afb1f29f0e22fb2195c114356294f95861ebcc.293ad4049eec03f4e065.js" async=""></script><script src="/_next/static/chunks/2c3b9bffc7150b37a7b3810dfcf1c0b0fac2bd18.26412b03d1df03d45396.js" async=""></script><script src="/_next/static/chunks/pages/posts/%5Bslug%5D-d84c8237cab24ecd19e3.js" async=""></script><script src="/_next/static/2TeC_BqFkmcRD1K9YUrqZ/_buildManifest.js" async=""></script><script src="/_next/static/2TeC_BqFkmcRD1K9YUrqZ/_ssgManifest.js" async=""></script></body></html>