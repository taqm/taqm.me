{"pageProps":{"post":"{\"slug\":\"typescript_keyof_tips\",\"title\":\"TypeScriptの keyof を特定の型でフィルタする\",\"publishedAt\":\"2018-04-26T02:16:00.000Z\",\"description\":\"TypeScriptでkeyofで取得するプロパティ名を型によってフィルタするtipsです。\",\"tags\":[\"TypeScript\"]}","content":"<p class=\"paragraph\">TypeScriptで少しハマったのでメモ</p>\n<p class=\"paragraph\">↓のようなインタフェースがあったとして</p>\n<div class=\"remark-highlight\"><pre class=\"language-typescript pre\"><code class=\"language-typescript code\"><span class=\"token keyword\">interface</span> <span class=\"token class-name\">Sample</span> <span class=\"token punctuation\">{</span>\n  name    <span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  age     <span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span>\n  email   <span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  address <span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  birthday<span class=\"token operator\">:</span> Date<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">Hoge</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">keyof</span> Sample<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// -> name | age | email | adress | birthday</span>\n</code></pre></div>\n<p class=\"paragraph\">型が<code class=\"code\">string</code>のキーだけの一覧が欲しい！となったので以下のようなTypeを使いました。</p>\n<div class=\"remark-highlight\"><pre class=\"language-typescript pre\"><code class=\"language-typescript code\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">FilteredKeys<span class=\"token operator\">&#x3C;</span><span class=\"token constant\">T</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">U</span><span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token punctuation\">[</span><span class=\"token constant\">P</span> <span class=\"token keyword\">in</span> <span class=\"token keyword\">keyof</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">[</span><span class=\"token constant\">P</span><span class=\"token punctuation\">]</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\"><span class=\"token constant\">U</span></span> <span class=\"token operator\">?</span> <span class=\"token constant\">P</span> <span class=\"token operator\">:</span> <span class=\"token builtin\">never</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">[</span><span class=\"token keyword\">keyof</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">Hoge</span> <span class=\"token operator\">=</span> FilteredKeys<span class=\"token operator\">&#x3C;</span>Sample<span class=\"token punctuation\">,</span> <span class=\"token builtin\">string</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// -> name | email | address</span>\n</code></pre></div>\n<p class=\"paragraph\">こんなことをしたい時点で少し無理やりな実装になってる可能性が高いですが\n忘れないようにメモ</p>"},"__N_SSG":true}