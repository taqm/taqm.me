<!DOCTYPE html><html lang="ja"><head><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-X38HKLJWTQ"></script><script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-X38HKLJWTQ', { page_path: window.location.pathname, }); </script><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><meta name="robots" content="nofollow noindex"/><title>CSS（SCSS）だけでマインスイーパーを作ってみる | taqm&#x27;s blog</title><meta name="keywords" content="CSS,SASS"/><meta name="description" content="JavaScriptを使わず、CSS(SCSS)のみでブラウザ上でマインスイーパーを実装してみた際の解説です。"/><meta property="og:url" content="https://taqm.me/posts/css_mine_sweeper"/><meta property="og:type" content="article"/><meta property="og:title" content="CSS（SCSS）だけでマインスイーパーを作ってみる | taqm&amp;apos;s blog"/><meta property="og:image" content="https://taqm.me/static/site_logo.png"/><meta property="og:description" content="JavaScriptを使わず、CSS(SCSS)のみでブラウザ上でマインスイーパーを実装してみた際の解説です。"/><meta property="og:site_name" content="taqm.me"/><meta name="twitter:card" content="summary"/><meta name="twitter:site" content="taqm"/><meta name="next-head-count" content="14"/><link rel="preload" href="/_next/static/css/3bd3ee853585bdba2b55.css" as="style"/><link rel="stylesheet" href="/_next/static/css/3bd3ee853585bdba2b55.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/main-8741ed3c7ec57f378f59.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-95c2b224bccf352ee870.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.daa7383ad2ab2e6757c1.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.286c5ad94e4334e87283.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-62c4ae74494db6a57e9e.js" as="script"/><link rel="preload" href="/_next/static/chunks/79afb1f29f0e22fb2195c114356294f95861ebcc.293ad4049eec03f4e065.js" as="script"/><link rel="preload" href="/_next/static/chunks/2c3b9bffc7150b37a7b3810dfcf1c0b0fac2bd18.26412b03d1df03d45396.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/posts/%5Bslug%5D-d84c8237cab24ecd19e3.js" as="script"/><style id="__jsx-2615209551">.inner.jsx-2615209551{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;height:2.5rem;}@media (min-width:640px){.inner.jsx-2615209551{-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;height:4rem;padding-left:1.5rem;padding-right:1.5rem;}}</style></head><body><div id="__next"><header class="jsx-2615209551 border-b border-gray-200 bg-white"><div class="jsx-2615209551 inner max-w-screen-lg mx-auto"><a class="jsx-2615209551 text-xl sm:text-2xl" href="/">taqm&#x27;blog</a></div></header><main class="container py-16"><article class="post-page"><div class="text-sm text-gray-500">2019-02-04</div><h1 class="text-2xl font-bold">CSS（SCSS）だけでマインスイーパーを作ってみる</h1><ul class="flex flex-wrap mt-2"><li class="mr-2 bg-gray-200 hover:bg-gray-300"><a class="block px-2 h-full text-sm" href="/tags/CSS">CSS</a></li><li class="mr-2 bg-gray-200 hover:bg-gray-300"><a class="block px-2 h-full text-sm" href="/tags/SASS">SASS</a></li></ul><div class="mt-10"><h2 class="heading lv-2">はじめに</h2>
<p class="paragraph">みなさんマインスイーパーをご存知ですか？
そうです！昔のWindowsに入っていたゲームです！</p>
<p class="paragraph">プログラミングの勉強の一環として作ったりすることも多い題材だと思いますが
今回はSass（SCSS）のみで作ってみたいと思います。（JavaScriptは一切書きません）</p>
<p class="paragraph">※ これはマインスイーパーの記事になるので、Sass(SCSS)の解説は控えめになっております</p>
<h2 class="heading lv-2">成果物</h2>
<p class="paragraph">まず動くものは<a href="https://taqm.github.io/css-mine-sweeper/" class="anchor" rel="noopener noreferrer" target="_blank">こちら</a>です
ソース →　<a href="https://github.com/taqm/css-mine-sweeper" class="anchor" rel="noopener noreferrer" target="_blank">GitHub</a></p>
<p class="paragraph">本当は<strong>CodePen</strong>に投稿しようと思ったのですが
ソースコードの質が悪いようで動かなかったので諦めました:pensive:</p>
<p class="paragraph">あと、後述しますがビルド時のSCSSからCSSへ変換するタイミングで地雷の位置が決まるので
上記のリンクは地雷の位置が変わることはありません...</p>
<h2 class="heading lv-2">利用技術</h2>
<p class="paragraph">以下のものを使っています</p>
<ul class="list unordered">
<li>yarn</li>
<li>SCSS</li>
<li>Pug</li>
<li>node-sass</li>
</ul>
<p class="paragraph">プロジェクトには<code class="code">stylelint</code>が入っていますが
有効化するの忘れてたので警告（or エラー）まみれです。</p>
<h3 class="heading lv-3">スタイリング</h3>
<p class="paragraph">今回はFlexboxにてスタイリングを行っています。</p>
<p class="paragraph">そして、キレイなスタイリングよりも、ロジカルな部分に重きをおいているので
見るに堪えないコードを書いている可能性があります。
その点ご了承ください（<code class="code">!important</code>とかは使ってないです）</p>
<h2 class="heading lv-2">解説</h2>
<p class="paragraph">すべてを解説するのは大変なので
苦労したところ、工夫した以下を解説していきます。</p>
<ul class="list unordered">
<li>地雷をランダムに配置</li>
<li>マスを開く、フラグを立てる</li>
<li>マスの周辺の地雷数を表示</li>
<li>開いたマスの周りに地雷がない場合は周辺を探索</li>
<li>残りの地雷数を表示</li>
<li>クリア判定、ゲームオーバー判定</li>
</ul>
<p class="paragraph">解説中に出てくるコードについてはかなり省略していますので、
詳細が気になる方はGitHubのほうを参照してください</p>
<h3 class="heading lv-3">最初に</h3>
<p class="paragraph">今回のSCSSで書くにあたって以下の変数を用意しております。</p>
<div class="remark-highlight"><pre class="language-scss pre"><code class="language-scss code"><span class="token property"><span class="token variable">$row</span></span><span class="token punctuation">:</span> <span class="token number">8</span><span class="token punctuation">;</span> <span class="token comment">// 横幅</span>
<span class="token property"><span class="token variable">$col</span></span><span class="token punctuation">:</span> <span class="token number">8</span><span class="token punctuation">;</span> <span class="token comment">// 縦幅</span>
<span class="token property"><span class="token variable">$mineCount</span></span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token comment">// 地雷の数</span>
</code></pre></div>
<p class="paragraph">用途はコメントの通りです！
では各要素の解説をしていきます。</p>
<h3 class="heading lv-3">地雷をランダムに配置</h3>
<p class="paragraph">まずは地雷を配置しないことには始まりません。
地雷の位置をべた書きではあんまりなのでランダムに配置したいところです。</p>
<p class="paragraph">「ランダムとか無理だろ・・・」と思っていたらうってつけの機能がありました。
SCSSの組み込み関数に<code class="code">random(n)</code>というものがあり、これがそのまま使えます。</p>
<p class="paragraph"><a href="https://qiita.com/tonkotsuboy_com/items/909b4073459ecaf7a435" class="anchor" rel="noopener noreferrer" target="_blank">参考記事はこちら</a></p>
<p class="paragraph">これを使うことでランダムに配置することは実現できそうですね。
では実際のコードを見てみます。</p>
<div class="has-filename"><div class="filename">style.scss</div><pre class="language-scss pre"><code class="language-scss code"><span class="token property"><span class="token variable">$minePos</span></span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 地雷の位置配列</span>

<span class="token keyword">@for</span> <span class="token variable">$i</span> <span class="token keyword">from</span> <span class="token selector">0 to <span class="token variable">$mineCount</span> </span><span class="token punctuation">{</span>
  <span class="token property"><span class="token variable">$mine</span></span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token property"><span class="token variable">$continue</span></span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

  <span class="token keyword">@while</span> <span class="token selector"><span class="token variable">$continue</span> != null </span><span class="token punctuation">{</span>
    <span class="token property"><span class="token variable">$mine</span></span><span class="token punctuation">:</span> <span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token variable">$row</span> <span class="token operator">*</span> <span class="token variable">$col</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property"><span class="token variable">$continue</span></span><span class="token punctuation">:</span> <span class="token function">index</span><span class="token punctuation">(</span><span class="token variable">$minePos</span><span class="token punctuation">,</span> <span class="token variable">$mine</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token property"><span class="token variable">$minePos</span></span><span class="token punctuation">:</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token variable">$minePos</span><span class="token punctuation">,</span> <span class="token variable">$mine</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div>
<p class="paragraph"><code class="code">$col</code>, <code class="code">$row</code>, <code class="code">$mineCount</code>は事前に説明した変数たちになります。</p>
<p class="paragraph">今回の設計ではそれぞれのマスに「0〜63」の数字を振っています。
<code class="code">random</code>の結果すでに地雷として選出済みの数字が選ばれた場合は
ループを継続し、重複なく地雷が指定の個数選択されるようにしました。</p>
<p class="paragraph">これで地雷をランダムに配置するという課題は完了です。</p>
<h4 class="heading lv-4">問題</h4>
<p class="paragraph">この<code class="code">random関数</code>はあくまでトランスパイルの時にランダムな数字を選ぶため
一度CSSへ書き出してしまうともう変わることはありません。</p>
<p class="paragraph">ここの点は残念ですが仕方がないです...</p>
<h3 class="heading lv-3">マスを開く、フラグを立てる</h3>
<p class="paragraph">ユーザが行うことができるアクションの２つを実装していきましょう。
もちろんSCSS縛りなので動的にクラス付与などはできません。</p>
<p class="paragraph">今回はINPUTタグのチェックボックスを用いて状態を判定していきます。</p>
<p class="paragraph">そして右クリックの判定など到底無理なので、
「マスを開くモード」と「フラグを立てるモード」の２つを用意し、
モードごとにチェックできるチェックボックスを切り替えていきます。</p>
<p class="paragraph">まずはHTML（Pug）の構造です。</p>
<div class="has-filename"><div class="filename">index.pug</div><pre class="language-pug pre"><code class="language-pug code"><span class="token tag">input<span class="token attr-id">#normal-mode</span><span class="token attributes"><span class="token punctuation">(</span><span class="token attr-name">type</span><span class="token punctuation">=</span><span class="token attr-value"><span class="token string">"radio"</span></span><span class="token punctuation">,</span> <span class="token attr-name">name</span><span class="token punctuation">=</span><span class="token attr-value"><span class="token string">"mode"</span></span><span class="token punctuation">,</span> <span class="token attr-name">checked</span><span class="token punctuation">)</span></span></span>
<span class="token tag">input<span class="token attr-id">#flag-mode</span><span class="token attributes"><span class="token punctuation">(</span><span class="token attr-name">type</span><span class="token punctuation">=</span><span class="token attr-value"><span class="token string">"radio"</span></span><span class="token punctuation">,</span> <span class="token attr-name">name</span><span class="token punctuation">=</span><span class="token attr-value"><span class="token string">"mode"</span></span><span class="token punctuation">)</span></span></span>
<span class="token tag">p<span class="token attr-class">.mode_control</span></span>
  <span class="token tag">label<span class="token attr-class">.normal_mode</span><span class="token attributes"><span class="token punctuation">(</span><span class="token attr-name">for</span><span class="token punctuation">=</span><span class="token attr-value"><span class="token string">"normal-mode"</span></span><span class="token punctuation">)</span></span></span>
    <span class="token tag">span</span> <span class="token plain-text">通常　</span>
  <span class="token tag">label<span class="token attr-class">.flag_mode</span><span class="token attributes"><span class="token punctuation">(</span><span class="token attr-name">for</span><span class="token punctuation">=</span><span class="token attr-value"><span class="token string">"flag-mode"</span></span><span class="token punctuation">)</span></span></span>
    <span class="token tag">span</span> <span class="token plain-text">フラグ</span>

<span class="token punctuation">-</span><span class="token code"> <span class="token keyword control-flow">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&#x3C;</span> <span class="token number">64</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span></span>
  <span class="token tag">input<span class="token attributes"><span class="token punctuation">(</span><span class="token attr-name">id</span> <span class="token punctuation">=</span> <span class="token attr-value"><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">input-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>i<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-open</span><span class="token template-punctuation string">`</span></span></span><span class="token punctuation">,</span> <span class="token attr-name">type</span> <span class="token punctuation">=</span> <span class="token attr-value"><span class="token string">"checkbox"</span></span><span class="token punctuation">)</span></span></span>
<span class="token punctuation">-</span><span class="token code"> <span class="token keyword control-flow">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&#x3C;</span> <span class="token number">64</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span></span>
  <span class="token tag">input<span class="token attr-class">.flag_check</span><span class="token attributes"><span class="token punctuation">(</span><span class="token attr-name">id</span> <span class="token punctuation">=</span> <span class="token attr-value"><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">input-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>i<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-flag</span><span class="token template-punctuation string">`</span></span></span><span class="token punctuation">,</span> <span class="token attr-name">type</span> <span class="token punctuation">=</span> <span class="token attr-value"><span class="token string">"checkbox"</span></span><span class="token punctuation">)</span></span></span>

<span class="token tag"><span class="token attr-class">.field</span></span>
  <span class="token punctuation">-</span><span class="token code"> <span class="token keyword control-flow">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&#x3C;</span> <span class="token number">64</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span></span>
    <span class="token tag"><span class="token attr-class">.cell</span></span>
      <span class="token tag">label<span class="token attr-class">.mark_as_opened</span><span class="token attributes"><span class="token punctuation">(</span><span class="token attr-name">for</span> <span class="token punctuation">=</span> <span class="token attr-value"><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">input-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>i<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-open</span><span class="token template-punctuation string">`</span></span></span><span class="token punctuation">)</span></span></span>
      <span class="token tag">label<span class="token attr-class">.mark_as_flag</span><span class="token attributes"><span class="token punctuation">(</span><span class="token attr-name">for</span> <span class="token punctuation">=</span> <span class="token attr-value"><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">input-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>i<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-flag</span><span class="token template-punctuation string">`</span></span></span><span class="token punctuation">)</span></span></span>
</code></pre></div>
<p class="paragraph">これをHTMLへ変換すると以下のような形となります。</p>
<div class="has-filename"><div class="filename">index.html</div><pre class="language-html pre"><code class="language-html code"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>normal-mode<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>radio<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mode<span class="token punctuation">"</span></span> <span class="token attr-name">checked</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>flag-mode<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>radio<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mode<span class="token punctuation">"</span></span> <span class="token attr-name">checked</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mode_control<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>label</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>normal_mode<span class="token punctuation">"</span></span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>normal-mode<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>span</span><span class="token punctuation">></span></span>通常<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>span</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>label</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>label</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>flag_mode<span class="token punctuation">"</span></span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>flag-mode<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>span</span><span class="token punctuation">></span></span>フラグ<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>span</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>label</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>p</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>input-{i}-open<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>checkbox<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> <span class="token comment">&#x3C;!-- i = 0 ~ 64 --></span>
...
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>input-{i}-flag<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>checkbox<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>flag_check<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
...
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>field<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>cell<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>label</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mark_as_opend<span class="token punctuation">"</span></span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>input-{i}-open<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>label</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>label</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mark_as_flag<span class="token punctuation">"</span></span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>input-{i}-flag<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>label</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span>
  ...
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span>
</code></pre></div>
<p class="paragraph">それではスタイルになりますー</p>
<div class="remark-highlight"><pre class="language-scss pre"><code class="language-scss code"><span class="token selector">#normal-mode:checked ~ .field </span><span class="token punctuation">{</span>
  <span class="token selector">.mark_as_opened </span><span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.mark_as_flag </span><span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token selector">#flag-mode:checked ~ .field </span><span class="token punctuation">{</span>
  <span class="token selector">.mark_as_opened </span><span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.mark_as_flag </span><span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">@mixin</span> <span class="token selector">open </span><span class="token punctuation">{</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token hexcode color">#EEE</span><span class="token punctuation">;</span>
  <span class="token selector">.mark_as_opened,</span>
<span class="token selector">  .mark_as_flag </span><span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">@for</span> <span class="token variable">$i</span> <span class="token keyword">from</span> <span class="token selector">0 to <span class="token variable">$col</span> * <span class="token variable">$row</span> </span><span class="token punctuation">{</span>
  .<span class="token property">cell</span><span class="token punctuation">:</span><span class="token function">nth-child</span><span class="token punctuation">(</span>#<span class="token punctuation">{</span><span class="token variable">$i</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token selector">#input-<span class="token variable">#{$i}</span>-open:checked ~ .field <span class="token parent important">&#x26;</span> </span><span class="token punctuation">{</span>
      <span class="token keyword">@include</span> open<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">#input-<span class="token variable">#{$i}</span>-flag:checked ~ .field <span class="token parent important">&#x26;</span> </span><span class="token punctuation">{</span>
      <span class="token selector"><span class="token parent important">&#x26;</span>::before </span><span class="token punctuation">{</span>
        <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">"🚩"</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token selector">.mark_as_opened </span><span class="token punctuation">{</span>
        <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div>
<p class="paragraph">マスを開く動作は
中にLABELを配置して、クリックしたら遠くのチェックボックスをチェックさせ
無理やりな兄弟セレクタにより開いた状態となります。
そして開いたマスには操作させたくないのでLABELを非表示にしちゃいましょう。</p>
<p class="paragraph">通常モードとフラグモードはラジオボタンで制御します。
<code class="code">#normal-mode</code>を選択している場合のみ<code class="code">.mark_as_opened</code>を有効化。
そして<code class="code">#flag-mode</code>の時は<code class="code">.mark_as_flag</code>を有効化。</p>
<p class="paragraph">これでマスをクリック時にチェックされるチェックボックスを切り分けることができるようになりました。</p>
<p class="paragraph">INPUTタグをかなり上の方に定義することで、兄弟要素としてセレクタを書きやすくなります。</p>
<h3 class="heading lv-3">マスの周辺の地雷数を表示</h3>
<p class="paragraph">マスを開いたので次は開いたときに表示するものを設定します。</p>
<p class="paragraph">表示されるものは以下の２つです。</p>
<ul class="list unordered">
<li>地雷の数</li>
<li>地雷そのもの</li>
</ul>
<p class="paragraph">そこが地雷でないかつ、周りに地雷が１つもない場合は何も表示しません。
（次のステップで詳しく触れます）</p>
<p class="paragraph">表示の方法は疑似要素<code class="code">::before</code>にて表示していきましょう。</p>
<div class="remark-highlight"><pre class="language-scss pre"><code class="language-scss code"><span class="token keyword">@mixin</span> <span class="token selector">open </span><span class="token punctuation">{</span>
  <span class="token selector"><span class="token parent important">&#x26;</span>::before </span><span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">100</span><span class="token unit">%</span><span class="token punctuation">;</span>
    <span class="token property">justify-content</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token property"><span class="token variable">$mineSelector</span></span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">@for</span> <span class="token variable">$i</span> <span class="token keyword">from</span> <span class="token selector">0 to <span class="token variable">$col</span> * <span class="token variable">$row</span> </span><span class="token punctuation">{</span>
  <span class="token property"><span class="token variable">$mines</span></span><span class="token punctuation">:</span> <span class="token function">countMine</span><span class="token punctuation">(</span><span class="token variable">$i</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property"><span class="token variable">$isMine</span></span><span class="token punctuation">:</span> <span class="token function">isMine</span><span class="token punctuation">(</span><span class="token variable">$i</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  .<span class="token property">cell</span><span class="token punctuation">:</span><span class="token function">nth-child</span><span class="token punctuation">(</span>#<span class="token punctuation">{</span><span class="token variable">$i</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token selector"><span class="token parent important">&#x26;</span>::before </span><span class="token punctuation">{</span>
      <span class="token keyword">@if</span> <span class="token selector"><span class="token variable">$isMine</span> </span><span class="token punctuation">{</span>
        <span class="token property"><span class="token variable">$mineSelector</span></span><span class="token punctuation">:</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token variable">$mineSelector</span><span class="token punctuation">,</span> #<span class="token punctuation">{</span>&#x26;<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'comma'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">@else</span> <span class="token punctuation">{</span>
        <span class="token property">content</span><span class="token punctuation">:</span> <span class="token function">if</span><span class="token punctuation">(</span><span class="token variable">$mines</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">"#{$mines}"</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token selector"><span class="token variable">#{$mineSelector}</span> </span><span class="token punctuation">{</span>
  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">'■'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div>
<p class="paragraph"><code class="code">.cell</code>の疑似要素<code class="code">::before</code>に<code class="code">content</code>を設定していきます。
デフォルトは<code class="code">display:none</code>で、開いたときのみ表示させるようにしましょう。
地雷の<code class="code">content</code>をわざわざ外に出しているのは、
当初は爆弾の画像をbase64で持たせようとして無駄を減らすつもりでしたが
面倒になったので<code class="code">■</code>にしてます:joy:</p>
<h4 class="heading lv-4">isMine, countMine</h4>
<p class="paragraph">ここで登場した<code class="code">isMine</code>と<code class="code">countMine</code>という自作関数の中身を見てきます。</p>
<div class="remark-highlight"><pre class="language-scss pre"><code class="language-scss code"><span class="token comment">// そこが地雷かどうか</span>
<span class="token keyword">@function</span> <span class="token function">isMine</span><span class="token punctuation">(</span><span class="token variable">$pos</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">@return</span> <span class="token function">index</span><span class="token punctuation">(</span><span class="token variable">$minePos</span><span class="token punctuation">,</span> <span class="token variable">$pos</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token null keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 周囲８マスの地雷の数を返却</span>
<span class="token keyword">@function</span> <span class="token function">countMine</span><span class="token punctuation">(</span><span class="token variable">$pos</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token property"><span class="token variable">$count</span></span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">@each</span> <span class="token variable">$n</span> in <span class="token function">getNeighborIndex</span><span class="token punctuation">(</span><span class="token variable">$pos</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">@if</span> <span class="token function">isMine</span><span class="token punctuation">(</span><span class="token variable">$n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token property"><span class="token variable">$count</span></span><span class="token punctuation">:</span> <span class="token variable">$count</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">@return</span> <span class="token variable">$count</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div>
<p class="paragraph"><code class="code">getNeighborIndex</code>では引数中心とした時の、周りの８マスに対応する数字の配列を返却してくれます。</p>
<p class="paragraph">先程の<strong>地雷をランダムに配置</strong>の章で準備した地雷の位置配列に
周囲８マスの数字いくつ含まれるのかを判定します。</p>
<h4 class="heading lv-4">getNeighborIndex</h4>
<p class="paragraph">マスの周りの数字を返却してくれる関数です。
今回は各マスを１次元の数値で管理しているためちょっと大変です。</p>
<div class="remark-highlight"><pre class="language-scss pre"><code class="language-scss code"><span class="token property"><span class="token variable">$areaOffsets</span></span><span class="token punctuation">:</span> <span class="token punctuation">(</span>
  <span class="token punctuation">(</span>-<span class="token variable">$col</span><span class="token punctuation">,</span> <span class="token variable">$col</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 上下</span>
  <span class="token punctuation">(</span>-<span class="token variable">$col</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">-1</span><span class="token punctuation">,</span> <span class="token variable">$col</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 左側</span>
  <span class="token punctuation">(</span>-<span class="token variable">$col</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> +<span class="token number">1</span><span class="token punctuation">,</span> <span class="token variable">$col</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 右側</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// フィールドの範囲内か判定</span>
<span class="token keyword">@function</span> <span class="token function">isValidPos</span><span class="token punctuation">(</span><span class="token variable">$pos</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">@return</span> <span class="token punctuation">(</span>
    <span class="token variable">$pos</span> <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">and</span>
    <span class="token variable">$pos</span> <span class="token operator">&#x3C;</span> <span class="token variable">$row</span> <span class="token operator">*</span> <span class="token variable">$col</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 周辺８マスのポジションを取得</span>
<span class="token keyword">@function</span> <span class="token function">getNeighborIndex</span><span class="token punctuation">(</span><span class="token variable">$center</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token property"><span class="token variable">$wk</span></span><span class="token punctuation">:</span> <span class="token function">nth</span><span class="token punctuation">(</span><span class="token variable">$areaOffsets</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">@if</span> <span class="token selector"><span class="token variable">$center</span> % <span class="token variable">$col</span> != 0 </span><span class="token punctuation">{</span> <span class="token comment">// 左端の場合スキップ</span>
    <span class="token property"><span class="token variable">$wk</span></span><span class="token punctuation">:</span> <span class="token function">join</span><span class="token punctuation">(</span><span class="token variable">$wk</span><span class="token punctuation">,</span> <span class="token function">nth</span><span class="token punctuation">(</span><span class="token variable">$areaOffsets</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">@if</span> <span class="token selector"><span class="token variable">$center</span> % <span class="token variable">$col</span> != <span class="token variable">$col</span> - 1 </span><span class="token punctuation">{</span> <span class="token comment">// 右恥の場合スキップ</span>
    <span class="token property"><span class="token variable">$wk</span></span><span class="token punctuation">:</span> <span class="token function">join</span><span class="token punctuation">(</span><span class="token variable">$wk</span><span class="token punctuation">,</span> <span class="token function">nth</span><span class="token punctuation">(</span><span class="token variable">$areaOffsets</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token property"><span class="token variable">$ret</span></span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">@each</span> <span class="token selector"><span class="token variable">$offset</span> in <span class="token variable">$wk</span> </span><span class="token punctuation">{</span>
    <span class="token keyword">@if</span> <span class="token function">isValidPos</span><span class="token punctuation">(</span><span class="token variable">$center</span> <span class="token operator">+</span> <span class="token variable">$offset</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 範囲外は省く</span>
      <span class="token property"><span class="token variable">$ret</span></span><span class="token punctuation">:</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token variable">$ret</span><span class="token punctuation">,</span> <span class="token variable">$center</span> <span class="token operator">+</span> <span class="token variable">$offset</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">@return</span> <span class="token variable">$ret</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div>
<p class="paragraph">まずは中心に対する周りのマスのオフセットを保持します。（<code class="code">areaOffsets</code>）
そして上下左右それぞれが有効なもののみ返却します。</p>
<h3 class="heading lv-3">開いたマスの周りに地雷がない場合は周辺を探索</h3>
<p class="paragraph">マインスイーパー自作時の醍醐味になります。
大体の実装が再帰により実現されていると思いますが、
今回も例に漏れず再帰を行います。</p>
<div class="remark-highlight"><pre class="language-scss pre"><code class="language-scss code"><span class="token keyword">@function</span> <span class="token function">getLinks</span><span class="token punctuation">(</span><span class="token variable">$center</span><span class="token punctuation">,</span> <span class="token variable">$linked</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token property"><span class="token variable">$neighber</span></span><span class="token punctuation">:</span> <span class="token function">getNeighborIndex</span><span class="token punctuation">(</span><span class="token variable">$center</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property"><span class="token variable">$tmp</span></span><span class="token punctuation">:</span> <span class="token variable">$linked</span><span class="token punctuation">;</span>

  <span class="token keyword">@each</span> <span class="token selector"><span class="token variable">$n</span> in <span class="token variable">$neighber</span> </span><span class="token punctuation">{</span>
    <span class="token keyword">@if</span> <span class="token function">index</span><span class="token punctuation">(</span><span class="token variable">$tmp</span><span class="token punctuation">,</span> <span class="token variable">$n</span><span class="token punctuation">)</span> <span class="token selector">== null </span><span class="token punctuation">{</span>
      <span class="token property"><span class="token variable">$c</span></span><span class="token punctuation">:</span> <span class="token function">countMine</span><span class="token punctuation">(</span><span class="token variable">$n</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token property"><span class="token variable">$tmp</span></span><span class="token punctuation">:</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token variable">$tmp</span><span class="token punctuation">,</span> <span class="token variable">$n</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">@if</span> <span class="token selector"><span class="token variable">$c</span> == 0 </span><span class="token punctuation">{</span>
        <span class="token property"><span class="token variable">$tmp</span></span><span class="token punctuation">:</span> <span class="token function">getLinks</span><span class="token punctuation">(</span><span class="token variable">$n</span><span class="token punctuation">,</span> <span class="token variable">$tmp</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">@return</span> <span class="token variable">$tmp</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">@for</span> <span class="token variable">$i</span> <span class="token keyword">from</span> <span class="token selector">0 to <span class="token variable">$col</span> * <span class="token variable">$row</span> </span><span class="token punctuation">{</span>
  <span class="token property"><span class="token variable">$mines</span></span><span class="token punctuation">:</span> <span class="token function">countMine</span><span class="token punctuation">(</span><span class="token variable">$i</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property"><span class="token variable">$isMine</span></span><span class="token punctuation">:</span> <span class="token function">isMine</span><span class="token punctuation">(</span><span class="token variable">$i</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">@if</span> <span class="token function">not</span><span class="token punctuation">(</span><span class="token variable">$isMine</span><span class="token punctuation">)</span> <span class="token selector">and <span class="token variable">$mines</span> == 0 </span><span class="token punctuation">{</span>
    <span class="token property"><span class="token variable">$selector</span></span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">@each</span> <span class="token variable">$p</span> in <span class="token function">getLinks</span><span class="token punctuation">(</span><span class="token variable">$i</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token property"><span class="token variable">$selector</span></span><span class="token punctuation">:</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token variable">$selector</span><span class="token punctuation">,</span> <span class="token string">"#input-#{$i}-open:checked ~ .field .cell:nth-child(#{$p + 1})"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    #<span class="token punctuation">{</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token variable">$selector</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'comma'</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token punctuation">{</span>
      <span class="token keyword">@include</span> open<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token property"><span class="token variable">$debug</span></span><span class="token punctuation">:</span> <span class="token variable">$selector</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div>
<p class="paragraph">周りに地雷がない場合のみ、再帰による探索を行います。</p>
<p class="paragraph">一度探索した値をキャッシュとして保持すれば少し効率が上がるのですが
出力されるCSSが変わるわけではないのでずさんな処理のままです。</p>
<p class="paragraph">「チェックの付いたチェックボックスと兄弟の<code class="code">.field</code>内にあるマスN」
という定義を大量に作っています。
都度スタイルを宣言していてはCSSが大変なことになるので、
配列にセレクタを詰めて一発でスタイルを当てましょう。</p>
<h3 class="heading lv-3">残りの地雷数を表示</h3>
<p class="paragraph">ゲームとして何個の地雷があるのかわからないと不便ですよね。
そこで地雷が残りいくつあるのかを表示できるようにしましょう！</p>
<div class="remark-highlight"><pre class="language-scss pre"><code class="language-scss code"><span class="token property"><span class="token variable">$lastSelector</span></span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">;</span>
<span class="token keyword">@for</span> <span class="token variable">$n</span> <span class="token keyword">from</span> <span class="token number">1</span> <span class="token keyword">through</span> <span class="token selector"><span class="token variable">$row</span> * <span class="token variable">$col</span> </span><span class="token punctuation">{</span>
  <span class="token property"><span class="token variable">$lastSelector</span></span><span class="token punctuation">:</span> <span class="token variable">$lastSelector</span> <span class="token operator">+</span> <span class="token string">".flag_check:checked ~"</span><span class="token punctuation">;</span>

  <span class="token selector"><span class="token variable">#{$lastSelector}</span> .notice_area .last </span><span class="token punctuation">{</span>
    <span class="token selector"><span class="token parent important">&#x26;</span>::before </span><span class="token punctuation">{</span>
      <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">"#{$mineCount - $n}"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token selector">.notice_area .last </span><span class="token punctuation">{</span>
  <span class="token selector"><span class="token parent important">&#x26;</span>::before </span><span class="token punctuation">{</span>
    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">"#{$mineCount}"</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector"><span class="token parent important">&#x26;</span>::after </span><span class="token punctuation">{</span>
    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">'個'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div>
<p class="paragraph">チェックの数をカウントするような形にしてみました。
地雷の数 - チェックした数になるように兄弟セレクタを延々と並べます。</p>
<p class="paragraph">ちなみに０のときのセレクタはこんな感じ</p>
<div class="remark-highlight"><pre class="language-css pre"><code class="language-css code"><span class="token selector"><span class="token class">.flag_check</span><span class="token pseudo-class">:checked</span> <span class="token combinator">~</span> <span class="token class">.flag_check</span><span class="token pseudo-class">:checked</span> <span class="token combinator">~</span> <span class="token class">.flag_check</span><span class="token pseudo-class">:checked</span> <span class="token combinator">~</span> <span class="token class">.flag_check</span><span class="token pseudo-class">:checked</span> <span class="token combinator">~</span> <span class="token class">.flag_check</span><span class="token pseudo-class">:checked</span> <span class="token combinator">~</span> <span class="token class">.flag_check</span><span class="token pseudo-class">:checked</span> <span class="token combinator">~</span> <span class="token class">.flag_check</span><span class="token pseudo-class">:checked</span> <span class="token combinator">~</span> <span class="token class">.flag_check</span><span class="token pseudo-class">:checked</span> <span class="token combinator">~</span> <span class="token class">.flag_check</span><span class="token pseudo-class">:checked</span> <span class="token combinator">~</span> <span class="token class">.flag_check</span><span class="token pseudo-class">:checked</span> <span class="token combinator">~</span> <span class="token class">.notice_area</span> <span class="token class">.last</span><span class="token pseudo-element">::before</span></span> <span class="token punctuation">{</span>
  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">"0"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div>
<p class="paragraph">人間が読むものじゃないですねー</p>
<h3 class="heading lv-3">クリア判定、ゲームオーバー判定</h3>
<p class="paragraph">やっと最後のゲーム終了判定です。
ここもチェックボックスの状態に応じてスタイル当ててあげることで対応しましょう。</p>
<p class="paragraph"><strong>ゲームオーバーの判定</strong></p>
<div class="remark-highlight"><pre class="language-scss pre"><code class="language-scss code"><span class="token comment">// ゲームオーバー判定</span>
<span class="token property"><span class="token variable">$overSelector</span></span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">@each</span> <span class="token selector"><span class="token variable">$p</span> in <span class="token variable">$minePos</span> </span><span class="token punctuation">{</span>
  <span class="token selector">#input-<span class="token variable">#{$p}</span>-open:checked ~ .game_over </span><span class="token punctuation">{</span>
    <span class="token property"><span class="token variable">$overSelector</span></span><span class="token punctuation">:</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token variable">$overSelector</span><span class="token punctuation">,</span> #<span class="token punctuation">{</span>&#x26;<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'comma'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token selector"><span class="token variable">#{$overSelector}</span> </span><span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div>
<p class="paragraph">地雷のチェックボックスが一つでもチェック状態になったら
ゲームオーバー領域の<code class="code">display: none</code>を解除し、
画面全体を覆うようにゲームオーバー画面を表示します。
これはとても素直です。</p>
<p class="paragraph"><strong>ゲームクリアの判定</strong>
すべての地雷のマスにフラグが立ったらクリア判定にしたいです。
しかし、それだとすべてのマスにフラグを立てたらクリアになってしまうので
地雷以外の場所にフラグが立っていないことも条件とする必要がありました。</p>
<div class="remark-highlight"><pre class="language-scss pre"><code class="language-scss code"><span class="token property"><span class="token variable">$clearSelector</span></span><span class="token punctuation">:</span> <span class="token string">"input"</span><span class="token punctuation">;</span>
<span class="token keyword">@for</span> <span class="token variable">$i</span> <span class="token keyword">from</span> <span class="token selector">0 to <span class="token variable">$col</span> * <span class="token variable">$row</span> </span><span class="token punctuation">{</span>
  <span class="token property"><span class="token variable">$wk</span></span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">;</span>
  <span class="token keyword">@if</span> <span class="token function">isMine</span><span class="token punctuation">(</span><span class="token variable">$i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token property"><span class="token variable">$wk</span></span><span class="token punctuation">:</span> <span class="token string">"#input-#{$i}-flag:checked"</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">@else</span> <span class="token punctuation">{</span>
    <span class="token property"><span class="token variable">$wk</span></span><span class="token punctuation">:</span> <span class="token string">"#input-#{$i}-flag:not(:checked)"</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token property"><span class="token variable">$clearSelector</span></span><span class="token punctuation">:</span> <span class="token variable">$clearSelector</span> <span class="token operator">+</span> <span class="token string">' ~ '</span> <span class="token operator">+</span> <span class="token variable">$wk</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector"><span class="token variable">#{$clearSelector}</span> ~ .game_clear </span><span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div>
<p class="paragraph">「これで地雷の場所にのみフラグが立っている」というセレクタの完成です！！</p>
<p class="paragraph">あと<strong>ゲームオーバー</strong>と<strong>ゲームクリア</strong>の要素をlabel要素にし、
INPUT(type=reset)に紐づけています。</p>
<p class="paragraph">こうすることで各要素クリック時にすべてのチェックが外れ
初期状態に戻るようにしています。</p>
<p class="paragraph">これで何度でも遊べる！！！</p>
<h2 class="heading lv-2">あとがき</h2>
<p class="paragraph">軽い気持ちで始めてみましたが中々に骨が折れました...
ただ、配列操作や乱数生成など普通にスタイリングしているだけでは
中々触ることのない機能を触ることができたので面白かったです:relaxed:</p>
<p class="paragraph">あと普通のプログラム言語にはない視点でのロジックを考える必要があり、色々と刺激を受けました！</p>
<p class="paragraph">今回は「CSSってこんな事もできるんですよ！」という紹介ということでやってみましたが、
他にもやってる方が結構いるので実装を見比べてみるとおもしろいかもしれませんね:sunny:</p>
<p class="paragraph">それでは皆さんよいSassライフを！(^_^)/~</p>
<hr>
<p class="paragraph">おしまい</p></div></article></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":"{\"slug\":\"css_mine_sweeper\",\"title\":\"CSS（SCSS）だけでマインスイーパーを作ってみる\",\"publishedAt\":\"2019-02-04T22:41:06.000Z\",\"description\":\"JavaScriptを使わず、CSS(SCSS)のみでブラウザ上でマインスイーパーを実装してみた際の解説です。\",\"tags\":[\"CSS\",\"SASS\"]}","content":"\u003ch2 class=\"heading lv-2\"\u003eはじめに\u003c/h2\u003e\n\u003cp class=\"paragraph\"\u003eみなさんマインスイーパーをご存知ですか？\nそうです！昔のWindowsに入っていたゲームです！\u003c/p\u003e\n\u003cp class=\"paragraph\"\u003eプログラミングの勉強の一環として作ったりすることも多い題材だと思いますが\n今回はSass（SCSS）のみで作ってみたいと思います。（JavaScriptは一切書きません）\u003c/p\u003e\n\u003cp class=\"paragraph\"\u003e※ これはマインスイーパーの記事になるので、Sass(SCSS)の解説は控えめになっております\u003c/p\u003e\n\u003ch2 class=\"heading lv-2\"\u003e成果物\u003c/h2\u003e\n\u003cp class=\"paragraph\"\u003eまず動くものは\u003ca href=\"https://taqm.github.io/css-mine-sweeper/\" class=\"anchor\" rel=\"noopener noreferrer\" target=\"_blank\"\u003eこちら\u003c/a\u003eです\nソース →　\u003ca href=\"https://github.com/taqm/css-mine-sweeper\" class=\"anchor\" rel=\"noopener noreferrer\" target=\"_blank\"\u003eGitHub\u003c/a\u003e\u003c/p\u003e\n\u003cp class=\"paragraph\"\u003e本当は\u003cstrong\u003eCodePen\u003c/strong\u003eに投稿しようと思ったのですが\nソースコードの質が悪いようで動かなかったので諦めました:pensive:\u003c/p\u003e\n\u003cp class=\"paragraph\"\u003eあと、後述しますがビルド時のSCSSからCSSへ変換するタイミングで地雷の位置が決まるので\n上記のリンクは地雷の位置が変わることはありません...\u003c/p\u003e\n\u003ch2 class=\"heading lv-2\"\u003e利用技術\u003c/h2\u003e\n\u003cp class=\"paragraph\"\u003e以下のものを使っています\u003c/p\u003e\n\u003cul class=\"list unordered\"\u003e\n\u003cli\u003eyarn\u003c/li\u003e\n\u003cli\u003eSCSS\u003c/li\u003e\n\u003cli\u003ePug\u003c/li\u003e\n\u003cli\u003enode-sass\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp class=\"paragraph\"\u003eプロジェクトには\u003ccode class=\"code\"\u003estylelint\u003c/code\u003eが入っていますが\n有効化するの忘れてたので警告（or エラー）まみれです。\u003c/p\u003e\n\u003ch3 class=\"heading lv-3\"\u003eスタイリング\u003c/h3\u003e\n\u003cp class=\"paragraph\"\u003e今回はFlexboxにてスタイリングを行っています。\u003c/p\u003e\n\u003cp class=\"paragraph\"\u003eそして、キレイなスタイリングよりも、ロジカルな部分に重きをおいているので\n見るに堪えないコードを書いている可能性があります。\nその点ご了承ください（\u003ccode class=\"code\"\u003e!important\u003c/code\u003eとかは使ってないです）\u003c/p\u003e\n\u003ch2 class=\"heading lv-2\"\u003e解説\u003c/h2\u003e\n\u003cp class=\"paragraph\"\u003eすべてを解説するのは大変なので\n苦労したところ、工夫した以下を解説していきます。\u003c/p\u003e\n\u003cul class=\"list unordered\"\u003e\n\u003cli\u003e地雷をランダムに配置\u003c/li\u003e\n\u003cli\u003eマスを開く、フラグを立てる\u003c/li\u003e\n\u003cli\u003eマスの周辺の地雷数を表示\u003c/li\u003e\n\u003cli\u003e開いたマスの周りに地雷がない場合は周辺を探索\u003c/li\u003e\n\u003cli\u003e残りの地雷数を表示\u003c/li\u003e\n\u003cli\u003eクリア判定、ゲームオーバー判定\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp class=\"paragraph\"\u003e解説中に出てくるコードについてはかなり省略していますので、\n詳細が気になる方はGitHubのほうを参照してください\u003c/p\u003e\n\u003ch3 class=\"heading lv-3\"\u003e最初に\u003c/h3\u003e\n\u003cp class=\"paragraph\"\u003e今回のSCSSで書くにあたって以下の変数を用意しております。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-scss pre\"\u003e\u003ccode class=\"language-scss code\"\u003e\u003cspan class=\"token property\"\u003e\u003cspan class=\"token variable\"\u003e$row\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e8\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// 横幅\u003c/span\u003e\n\u003cspan class=\"token property\"\u003e\u003cspan class=\"token variable\"\u003e$col\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e8\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// 縦幅\u003c/span\u003e\n\u003cspan class=\"token property\"\u003e\u003cspan class=\"token variable\"\u003e$mineCount\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e10\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// 地雷の数\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp class=\"paragraph\"\u003e用途はコメントの通りです！\nでは各要素の解説をしていきます。\u003c/p\u003e\n\u003ch3 class=\"heading lv-3\"\u003e地雷をランダムに配置\u003c/h3\u003e\n\u003cp class=\"paragraph\"\u003eまずは地雷を配置しないことには始まりません。\n地雷の位置をべた書きではあんまりなのでランダムに配置したいところです。\u003c/p\u003e\n\u003cp class=\"paragraph\"\u003e「ランダムとか無理だろ・・・」と思っていたらうってつけの機能がありました。\nSCSSの組み込み関数に\u003ccode class=\"code\"\u003erandom(n)\u003c/code\u003eというものがあり、これがそのまま使えます。\u003c/p\u003e\n\u003cp class=\"paragraph\"\u003e\u003ca href=\"https://qiita.com/tonkotsuboy_com/items/909b4073459ecaf7a435\" class=\"anchor\" rel=\"noopener noreferrer\" target=\"_blank\"\u003e参考記事はこちら\u003c/a\u003e\u003c/p\u003e\n\u003cp class=\"paragraph\"\u003eこれを使うことでランダムに配置することは実現できそうですね。\nでは実際のコードを見てみます。\u003c/p\u003e\n\u003cdiv class=\"has-filename\"\u003e\u003cdiv class=\"filename\"\u003estyle.scss\u003c/div\u003e\u003cpre class=\"language-scss pre\"\u003e\u003ccode class=\"language-scss code\"\u003e\u003cspan class=\"token property\"\u003e\u003cspan class=\"token variable\"\u003e$minePos\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// 地雷の位置配列\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003e@for\u003c/span\u003e \u003cspan class=\"token variable\"\u003e$i\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"token selector\"\u003e0 to \u003cspan class=\"token variable\"\u003e$mineCount\u003c/span\u003e \u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003e\u003cspan class=\"token variable\"\u003e$mine\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003e\u003cspan class=\"token variable\"\u003e$continue\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token boolean\"\u003etrue\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n  \u003cspan class=\"token keyword\"\u003e@while\u003c/span\u003e \u003cspan class=\"token selector\"\u003e\u003cspan class=\"token variable\"\u003e$continue\u003c/span\u003e != null \u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token property\"\u003e\u003cspan class=\"token variable\"\u003e$mine\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token function\"\u003erandom\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token variable\"\u003e$row\u003c/span\u003e \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e \u003cspan class=\"token variable\"\u003e$col\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token property\"\u003e\u003cspan class=\"token variable\"\u003e$continue\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token function\"\u003eindex\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token variable\"\u003e$minePos\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token variable\"\u003e$mine\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003e\u003cspan class=\"token variable\"\u003e$minePos\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token function\"\u003eappend\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token variable\"\u003e$minePos\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token variable\"\u003e$mine\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp class=\"paragraph\"\u003e\u003ccode class=\"code\"\u003e$col\u003c/code\u003e, \u003ccode class=\"code\"\u003e$row\u003c/code\u003e, \u003ccode class=\"code\"\u003e$mineCount\u003c/code\u003eは事前に説明した変数たちになります。\u003c/p\u003e\n\u003cp class=\"paragraph\"\u003e今回の設計ではそれぞれのマスに「0〜63」の数字を振っています。\n\u003ccode class=\"code\"\u003erandom\u003c/code\u003eの結果すでに地雷として選出済みの数字が選ばれた場合は\nループを継続し、重複なく地雷が指定の個数選択されるようにしました。\u003c/p\u003e\n\u003cp class=\"paragraph\"\u003eこれで地雷をランダムに配置するという課題は完了です。\u003c/p\u003e\n\u003ch4 class=\"heading lv-4\"\u003e問題\u003c/h4\u003e\n\u003cp class=\"paragraph\"\u003eこの\u003ccode class=\"code\"\u003erandom関数\u003c/code\u003eはあくまでトランスパイルの時にランダムな数字を選ぶため\n一度CSSへ書き出してしまうともう変わることはありません。\u003c/p\u003e\n\u003cp class=\"paragraph\"\u003eここの点は残念ですが仕方がないです...\u003c/p\u003e\n\u003ch3 class=\"heading lv-3\"\u003eマスを開く、フラグを立てる\u003c/h3\u003e\n\u003cp class=\"paragraph\"\u003eユーザが行うことができるアクションの２つを実装していきましょう。\nもちろんSCSS縛りなので動的にクラス付与などはできません。\u003c/p\u003e\n\u003cp class=\"paragraph\"\u003e今回はINPUTタグのチェックボックスを用いて状態を判定していきます。\u003c/p\u003e\n\u003cp class=\"paragraph\"\u003eそして右クリックの判定など到底無理なので、\n「マスを開くモード」と「フラグを立てるモード」の２つを用意し、\nモードごとにチェックできるチェックボックスを切り替えていきます。\u003c/p\u003e\n\u003cp class=\"paragraph\"\u003eまずはHTML（Pug）の構造です。\u003c/p\u003e\n\u003cdiv class=\"has-filename\"\u003e\u003cdiv class=\"filename\"\u003eindex.pug\u003c/div\u003e\u003cpre class=\"language-pug pre\"\u003e\u003ccode class=\"language-pug code\"\u003e\u003cspan class=\"token tag\"\u003einput\u003cspan class=\"token attr-id\"\u003e#normal-mode\u003c/span\u003e\u003cspan class=\"token attributes\"\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token attr-name\"\u003etype\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token string\"\u003e\"radio\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003ename\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token string\"\u003e\"mode\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003echecked\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token tag\"\u003einput\u003cspan class=\"token attr-id\"\u003e#flag-mode\u003c/span\u003e\u003cspan class=\"token attributes\"\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token attr-name\"\u003etype\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token string\"\u003e\"radio\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003ename\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token string\"\u003e\"mode\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token tag\"\u003ep\u003cspan class=\"token attr-class\"\u003e.mode_control\u003c/span\u003e\u003c/span\u003e\n  \u003cspan class=\"token tag\"\u003elabel\u003cspan class=\"token attr-class\"\u003e.normal_mode\u003c/span\u003e\u003cspan class=\"token attributes\"\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token attr-name\"\u003efor\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token string\"\u003e\"normal-mode\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\n    \u003cspan class=\"token tag\"\u003espan\u003c/span\u003e \u003cspan class=\"token plain-text\"\u003e通常　\u003c/span\u003e\n  \u003cspan class=\"token tag\"\u003elabel\u003cspan class=\"token attr-class\"\u003e.flag_mode\u003c/span\u003e\u003cspan class=\"token attributes\"\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token attr-name\"\u003efor\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token string\"\u003e\"flag-mode\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\n    \u003cspan class=\"token tag\"\u003espan\u003c/span\u003e \u003cspan class=\"token plain-text\"\u003eフラグ\u003c/span\u003e\n\n\u003cspan class=\"token punctuation\"\u003e-\u003c/span\u003e\u003cspan class=\"token code\"\u003e \u003cspan class=\"token keyword control-flow\"\u003efor\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e i \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e i \u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e \u003cspan class=\"token number\"\u003e64\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e i\u003cspan class=\"token operator\"\u003e++\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003c/span\u003e\n  \u003cspan class=\"token tag\"\u003einput\u003cspan class=\"token attributes\"\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token attr-name\"\u003eid\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e \u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token template-string\"\u003e\u003cspan class=\"token template-punctuation string\"\u003e`\u003c/span\u003e\u003cspan class=\"token string\"\u003einput-\u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token interpolation-punctuation punctuation\"\u003e${\u003c/span\u003ei\u003cspan class=\"token interpolation-punctuation punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e-open\u003c/span\u003e\u003cspan class=\"token template-punctuation string\"\u003e`\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003etype\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e \u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token string\"\u003e\"checkbox\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e-\u003c/span\u003e\u003cspan class=\"token code\"\u003e \u003cspan class=\"token keyword control-flow\"\u003efor\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e i \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e i \u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e \u003cspan class=\"token number\"\u003e64\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e i\u003cspan class=\"token operator\"\u003e++\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003c/span\u003e\n  \u003cspan class=\"token tag\"\u003einput\u003cspan class=\"token attr-class\"\u003e.flag_check\u003c/span\u003e\u003cspan class=\"token attributes\"\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token attr-name\"\u003eid\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e \u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token template-string\"\u003e\u003cspan class=\"token template-punctuation string\"\u003e`\u003c/span\u003e\u003cspan class=\"token string\"\u003einput-\u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token interpolation-punctuation punctuation\"\u003e${\u003c/span\u003ei\u003cspan class=\"token interpolation-punctuation punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e-flag\u003c/span\u003e\u003cspan class=\"token template-punctuation string\"\u003e`\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003etype\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e \u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token string\"\u003e\"checkbox\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\n\n\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token attr-class\"\u003e.field\u003c/span\u003e\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e-\u003c/span\u003e\u003cspan class=\"token code\"\u003e \u003cspan class=\"token keyword control-flow\"\u003efor\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e i \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e i \u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e \u003cspan class=\"token number\"\u003e64\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e i\u003cspan class=\"token operator\"\u003e++\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003c/span\u003e\n    \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token attr-class\"\u003e.cell\u003c/span\u003e\u003c/span\u003e\n      \u003cspan class=\"token tag\"\u003elabel\u003cspan class=\"token attr-class\"\u003e.mark_as_opened\u003c/span\u003e\u003cspan class=\"token attributes\"\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token attr-name\"\u003efor\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e \u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token template-string\"\u003e\u003cspan class=\"token template-punctuation string\"\u003e`\u003c/span\u003e\u003cspan class=\"token string\"\u003einput-\u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token interpolation-punctuation punctuation\"\u003e${\u003c/span\u003ei\u003cspan class=\"token interpolation-punctuation punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e-open\u003c/span\u003e\u003cspan class=\"token template-punctuation string\"\u003e`\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\n      \u003cspan class=\"token tag\"\u003elabel\u003cspan class=\"token attr-class\"\u003e.mark_as_flag\u003c/span\u003e\u003cspan class=\"token attributes\"\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token attr-name\"\u003efor\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e \u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token template-string\"\u003e\u003cspan class=\"token template-punctuation string\"\u003e`\u003c/span\u003e\u003cspan class=\"token string\"\u003einput-\u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token interpolation-punctuation punctuation\"\u003e${\u003c/span\u003ei\u003cspan class=\"token interpolation-punctuation punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e-flag\u003c/span\u003e\u003cspan class=\"token template-punctuation string\"\u003e`\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp class=\"paragraph\"\u003eこれをHTMLへ変換すると以下のような形となります。\u003c/p\u003e\n\u003cdiv class=\"has-filename\"\u003e\u003cdiv class=\"filename\"\u003eindex.html\u003c/div\u003e\u003cpre class=\"language-html pre\"\u003e\u003ccode class=\"language-html code\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003einput\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003eid\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003enormal-mode\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003etype\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003eradio\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003ename\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003emode\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003echecked\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003einput\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003eid\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003eflag-mode\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003etype\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003eradio\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003ename\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003emode\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003echecked\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003ep\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003eclass\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003emode_control\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n  \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003elabel\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003eclass\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003enormal_mode\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003efor\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003enormal-mode\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n    \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003espan\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e通常\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003espan\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n  \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003elabel\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n  \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003elabel\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003eclass\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003eflag_mode\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003efor\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003eflag-mode\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n    \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003espan\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003eフラグ\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003espan\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n  \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003elabel\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003ep\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\n\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003einput\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003eid\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003einput-{i}-open\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003etype\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003echeckbox\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token comment\"\u003e\u0026#x3C;!-- i = 0 ~ 64 --\u003e\u003c/span\u003e\n...\n\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003einput\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003eid\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003einput-{i}-flag\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003etype\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003echeckbox\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003eclass\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003eflag_check\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n...\n\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003ediv\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003eclass\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003efield\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n  \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003ediv\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003eclass\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003ecell\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n    \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003elabel\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003eclass\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003emark_as_opend\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003efor\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003einput-{i}-open\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003elabel\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n    \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003elabel\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003eclass\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003emark_as_flag\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003efor\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003einput-{i}-flag\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003elabel\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n  \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003ediv\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n  ...\n\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003ediv\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp class=\"paragraph\"\u003eそれではスタイルになりますー\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-scss pre\"\u003e\u003ccode class=\"language-scss code\"\u003e\u003cspan class=\"token selector\"\u003e#normal-mode:checked ~ .field \u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token selector\"\u003e.mark_as_opened \u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token property\"\u003edisplay\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e block\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"token selector\"\u003e.mark_as_flag \u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token property\"\u003edisplay\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e none\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"token selector\"\u003e#flag-mode:checked ~ .field \u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token selector\"\u003e.mark_as_opened \u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token property\"\u003edisplay\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e none\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"token selector\"\u003e.mark_as_flag \u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token property\"\u003edisplay\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e block\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003e@mixin\u003c/span\u003e \u003cspan class=\"token selector\"\u003eopen \u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003ebackground-color\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token hexcode color\"\u003e#EEE\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token selector\"\u003e.mark_as_opened,\u003c/span\u003e\n\u003cspan class=\"token selector\"\u003e  .mark_as_flag \u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token property\"\u003edisplay\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e none\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003e@for\u003c/span\u003e \u003cspan class=\"token variable\"\u003e$i\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"token selector\"\u003e0 to \u003cspan class=\"token variable\"\u003e$col\u003c/span\u003e * \u003cspan class=\"token variable\"\u003e$row\u003c/span\u003e \u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  .\u003cspan class=\"token property\"\u003ecell\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\u003cspan class=\"token function\"\u003enth-child\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e#\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token variable\"\u003e$i\u003c/span\u003e \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token selector\"\u003e#input-\u003cspan class=\"token variable\"\u003e#{$i}\u003c/span\u003e-open:checked ~ .field \u003cspan class=\"token parent important\"\u003e\u0026#x26;\u003c/span\u003e \u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"token keyword\"\u003e@include\u003c/span\u003e open\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token selector\"\u003e#input-\u003cspan class=\"token variable\"\u003e#{$i}\u003c/span\u003e-flag:checked ~ .field \u003cspan class=\"token parent important\"\u003e\u0026#x26;\u003c/span\u003e \u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"token selector\"\u003e\u003cspan class=\"token parent important\"\u003e\u0026#x26;\u003c/span\u003e::before \u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token property\"\u003econtent\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"🚩\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n      \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n      \u003cspan class=\"token selector\"\u003e.mark_as_opened \u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token property\"\u003edisplay\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e none\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n      \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp class=\"paragraph\"\u003eマスを開く動作は\n中にLABELを配置して、クリックしたら遠くのチェックボックスをチェックさせ\n無理やりな兄弟セレクタにより開いた状態となります。\nそして開いたマスには操作させたくないのでLABELを非表示にしちゃいましょう。\u003c/p\u003e\n\u003cp class=\"paragraph\"\u003e通常モードとフラグモードはラジオボタンで制御します。\n\u003ccode class=\"code\"\u003e#normal-mode\u003c/code\u003eを選択している場合のみ\u003ccode class=\"code\"\u003e.mark_as_opened\u003c/code\u003eを有効化。\nそして\u003ccode class=\"code\"\u003e#flag-mode\u003c/code\u003eの時は\u003ccode class=\"code\"\u003e.mark_as_flag\u003c/code\u003eを有効化。\u003c/p\u003e\n\u003cp class=\"paragraph\"\u003eこれでマスをクリック時にチェックされるチェックボックスを切り分けることができるようになりました。\u003c/p\u003e\n\u003cp class=\"paragraph\"\u003eINPUTタグをかなり上の方に定義することで、兄弟要素としてセレクタを書きやすくなります。\u003c/p\u003e\n\u003ch3 class=\"heading lv-3\"\u003eマスの周辺の地雷数を表示\u003c/h3\u003e\n\u003cp class=\"paragraph\"\u003eマスを開いたので次は開いたときに表示するものを設定します。\u003c/p\u003e\n\u003cp class=\"paragraph\"\u003e表示されるものは以下の２つです。\u003c/p\u003e\n\u003cul class=\"list unordered\"\u003e\n\u003cli\u003e地雷の数\u003c/li\u003e\n\u003cli\u003e地雷そのもの\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp class=\"paragraph\"\u003eそこが地雷でないかつ、周りに地雷が１つもない場合は何も表示しません。\n（次のステップで詳しく触れます）\u003c/p\u003e\n\u003cp class=\"paragraph\"\u003e表示の方法は疑似要素\u003ccode class=\"code\"\u003e::before\u003c/code\u003eにて表示していきましょう。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-scss pre\"\u003e\u003ccode class=\"language-scss code\"\u003e\u003cspan class=\"token keyword\"\u003e@mixin\u003c/span\u003e \u003cspan class=\"token selector\"\u003eopen \u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token selector\"\u003e\u003cspan class=\"token parent important\"\u003e\u0026#x26;\u003c/span\u003e::before \u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token property\"\u003edisplay\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e flex\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token property\"\u003eheight\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e100\u003c/span\u003e\u003cspan class=\"token unit\"\u003e%\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token property\"\u003ejustify-content\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e center\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token property\"\u003ealign-items\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e center\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"token property\"\u003e\u003cspan class=\"token variable\"\u003e$mineSelector\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003e@for\u003c/span\u003e \u003cspan class=\"token variable\"\u003e$i\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"token selector\"\u003e0 to \u003cspan class=\"token variable\"\u003e$col\u003c/span\u003e * \u003cspan class=\"token variable\"\u003e$row\u003c/span\u003e \u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003e\u003cspan class=\"token variable\"\u003e$mines\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token function\"\u003ecountMine\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token variable\"\u003e$i\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003e\u003cspan class=\"token variable\"\u003e$isMine\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token function\"\u003eisMine\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token variable\"\u003e$i\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  .\u003cspan class=\"token property\"\u003ecell\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\u003cspan class=\"token function\"\u003enth-child\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e#\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token variable\"\u003e$i\u003c/span\u003e \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token selector\"\u003e\u003cspan class=\"token parent important\"\u003e\u0026#x26;\u003c/span\u003e::before \u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"token keyword\"\u003e@if\u003c/span\u003e \u003cspan class=\"token selector\"\u003e\u003cspan class=\"token variable\"\u003e$isMine\u003c/span\u003e \u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token property\"\u003e\u003cspan class=\"token variable\"\u003e$mineSelector\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token function\"\u003eappend\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token variable\"\u003e$mineSelector\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e #\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u0026#x26;\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e'comma'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n      \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token keyword\"\u003e@else\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token property\"\u003econtent\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token function\"\u003eif\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token variable\"\u003e$mines\u003c/span\u003e \u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"#{$mines}\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e''\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n      \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n      \u003cspan class=\"token property\"\u003edisplay\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e none\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"token selector\"\u003e\u003cspan class=\"token variable\"\u003e#{$mineSelector}\u003c/span\u003e \u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003econtent\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e'■'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp class=\"paragraph\"\u003e\u003ccode class=\"code\"\u003e.cell\u003c/code\u003eの疑似要素\u003ccode class=\"code\"\u003e::before\u003c/code\u003eに\u003ccode class=\"code\"\u003econtent\u003c/code\u003eを設定していきます。\nデフォルトは\u003ccode class=\"code\"\u003edisplay:none\u003c/code\u003eで、開いたときのみ表示させるようにしましょう。\n地雷の\u003ccode class=\"code\"\u003econtent\u003c/code\u003eをわざわざ外に出しているのは、\n当初は爆弾の画像をbase64で持たせようとして無駄を減らすつもりでしたが\n面倒になったので\u003ccode class=\"code\"\u003e■\u003c/code\u003eにしてます:joy:\u003c/p\u003e\n\u003ch4 class=\"heading lv-4\"\u003eisMine, countMine\u003c/h4\u003e\n\u003cp class=\"paragraph\"\u003eここで登場した\u003ccode class=\"code\"\u003eisMine\u003c/code\u003eと\u003ccode class=\"code\"\u003ecountMine\u003c/code\u003eという自作関数の中身を見てきます。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-scss pre\"\u003e\u003ccode class=\"language-scss code\"\u003e\u003cspan class=\"token comment\"\u003e// そこが地雷かどうか\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003e@function\u003c/span\u003e \u003cspan class=\"token function\"\u003eisMine\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token variable\"\u003e$pos\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003e@return\u003c/span\u003e \u003cspan class=\"token function\"\u003eindex\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token variable\"\u003e$minePos\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token variable\"\u003e$pos\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e!=\u003c/span\u003e \u003cspan class=\"token null keyword\"\u003enull\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e// 周囲８マスの地雷の数を返却\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003e@function\u003c/span\u003e \u003cspan class=\"token function\"\u003ecountMine\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token variable\"\u003e$pos\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003e\u003cspan class=\"token variable\"\u003e$count\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003e@each\u003c/span\u003e \u003cspan class=\"token variable\"\u003e$n\u003c/span\u003e in \u003cspan class=\"token function\"\u003egetNeighborIndex\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token variable\"\u003e$pos\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003e@if\u003c/span\u003e \u003cspan class=\"token function\"\u003eisMine\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token variable\"\u003e$n\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"token property\"\u003e\u003cspan class=\"token variable\"\u003e$count\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token variable\"\u003e$count\u003c/span\u003e \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003e@return\u003c/span\u003e \u003cspan class=\"token variable\"\u003e$count\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp class=\"paragraph\"\u003e\u003ccode class=\"code\"\u003egetNeighborIndex\u003c/code\u003eでは引数中心とした時の、周りの８マスに対応する数字の配列を返却してくれます。\u003c/p\u003e\n\u003cp class=\"paragraph\"\u003e先程の\u003cstrong\u003e地雷をランダムに配置\u003c/strong\u003eの章で準備した地雷の位置配列に\n周囲８マスの数字いくつ含まれるのかを判定します。\u003c/p\u003e\n\u003ch4 class=\"heading lv-4\"\u003egetNeighborIndex\u003c/h4\u003e\n\u003cp class=\"paragraph\"\u003eマスの周りの数字を返却してくれる関数です。\n今回は各マスを１次元の数値で管理しているためちょっと大変です。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-scss pre\"\u003e\u003ccode class=\"language-scss code\"\u003e\u003cspan class=\"token property\"\u003e\u003cspan class=\"token variable\"\u003e$areaOffsets\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e-\u003cspan class=\"token variable\"\u003e$col\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token variable\"\u003e$col\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// 上下\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e-\u003cspan class=\"token variable\"\u003e$col\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e-1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token variable\"\u003e$col\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// 左側\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e-\u003cspan class=\"token variable\"\u003e$col\u003c/span\u003e \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e +\u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token variable\"\u003e$col\u003c/span\u003e \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// 右側\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e// フィールドの範囲内か判定\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003e@function\u003c/span\u003e \u003cspan class=\"token function\"\u003eisValidPos\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token variable\"\u003e$pos\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003e@return\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\n    \u003cspan class=\"token variable\"\u003e$pos\u003c/span\u003e \u003cspan class=\"token operator\"\u003e\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e \u003cspan class=\"token operator\"\u003eand\u003c/span\u003e\n    \u003cspan class=\"token variable\"\u003e$pos\u003c/span\u003e \u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e \u003cspan class=\"token variable\"\u003e$row\u003c/span\u003e \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e \u003cspan class=\"token variable\"\u003e$col\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e// 周辺８マスのポジションを取得\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003e@function\u003c/span\u003e \u003cspan class=\"token function\"\u003egetNeighborIndex\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token variable\"\u003e$center\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003e\u003cspan class=\"token variable\"\u003e$wk\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token function\"\u003enth\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token variable\"\u003e$areaOffsets\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003e@if\u003c/span\u003e \u003cspan class=\"token selector\"\u003e\u003cspan class=\"token variable\"\u003e$center\u003c/span\u003e % \u003cspan class=\"token variable\"\u003e$col\u003c/span\u003e != 0 \u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// 左端の場合スキップ\u003c/span\u003e\n    \u003cspan class=\"token property\"\u003e\u003cspan class=\"token variable\"\u003e$wk\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token function\"\u003ejoin\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token variable\"\u003e$wk\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token function\"\u003enth\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token variable\"\u003e$areaOffsets\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003e@if\u003c/span\u003e \u003cspan class=\"token selector\"\u003e\u003cspan class=\"token variable\"\u003e$center\u003c/span\u003e % \u003cspan class=\"token variable\"\u003e$col\u003c/span\u003e != \u003cspan class=\"token variable\"\u003e$col\u003c/span\u003e - 1 \u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// 右恥の場合スキップ\u003c/span\u003e\n    \u003cspan class=\"token property\"\u003e\u003cspan class=\"token variable\"\u003e$wk\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token function\"\u003ejoin\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token variable\"\u003e$wk\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token function\"\u003enth\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token variable\"\u003e$areaOffsets\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e3\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003e\u003cspan class=\"token variable\"\u003e$ret\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003e@each\u003c/span\u003e \u003cspan class=\"token selector\"\u003e\u003cspan class=\"token variable\"\u003e$offset\u003c/span\u003e in \u003cspan class=\"token variable\"\u003e$wk\u003c/span\u003e \u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003e@if\u003c/span\u003e \u003cspan class=\"token function\"\u003eisValidPos\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token variable\"\u003e$center\u003c/span\u003e \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e \u003cspan class=\"token variable\"\u003e$offset\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// 範囲外は省く\u003c/span\u003e\n      \u003cspan class=\"token property\"\u003e\u003cspan class=\"token variable\"\u003e$ret\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token function\"\u003eappend\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token variable\"\u003e$ret\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token variable\"\u003e$center\u003c/span\u003e \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e \u003cspan class=\"token variable\"\u003e$offset\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003e@return\u003c/span\u003e \u003cspan class=\"token variable\"\u003e$ret\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp class=\"paragraph\"\u003eまずは中心に対する周りのマスのオフセットを保持します。（\u003ccode class=\"code\"\u003eareaOffsets\u003c/code\u003e）\nそして上下左右それぞれが有効なもののみ返却します。\u003c/p\u003e\n\u003ch3 class=\"heading lv-3\"\u003e開いたマスの周りに地雷がない場合は周辺を探索\u003c/h3\u003e\n\u003cp class=\"paragraph\"\u003eマインスイーパー自作時の醍醐味になります。\n大体の実装が再帰により実現されていると思いますが、\n今回も例に漏れず再帰を行います。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-scss pre\"\u003e\u003ccode class=\"language-scss code\"\u003e\u003cspan class=\"token keyword\"\u003e@function\u003c/span\u003e \u003cspan class=\"token function\"\u003egetLinks\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token variable\"\u003e$center\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token variable\"\u003e$linked\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003e\u003cspan class=\"token variable\"\u003e$neighber\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token function\"\u003egetNeighborIndex\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token variable\"\u003e$center\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003e\u003cspan class=\"token variable\"\u003e$tmp\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token variable\"\u003e$linked\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n  \u003cspan class=\"token keyword\"\u003e@each\u003c/span\u003e \u003cspan class=\"token selector\"\u003e\u003cspan class=\"token variable\"\u003e$n\u003c/span\u003e in \u003cspan class=\"token variable\"\u003e$neighber\u003c/span\u003e \u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003e@if\u003c/span\u003e \u003cspan class=\"token function\"\u003eindex\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token variable\"\u003e$tmp\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token variable\"\u003e$n\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token selector\"\u003e== null \u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"token property\"\u003e\u003cspan class=\"token variable\"\u003e$c\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token function\"\u003ecountMine\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token variable\"\u003e$n\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n      \u003cspan class=\"token property\"\u003e\u003cspan class=\"token variable\"\u003e$tmp\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token function\"\u003eappend\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token variable\"\u003e$tmp\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token variable\"\u003e$n\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n      \u003cspan class=\"token keyword\"\u003e@if\u003c/span\u003e \u003cspan class=\"token selector\"\u003e\u003cspan class=\"token variable\"\u003e$c\u003c/span\u003e == 0 \u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token property\"\u003e\u003cspan class=\"token variable\"\u003e$tmp\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token function\"\u003egetLinks\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token variable\"\u003e$n\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token variable\"\u003e$tmp\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n      \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003e@return\u003c/span\u003e \u003cspan class=\"token variable\"\u003e$tmp\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003e@for\u003c/span\u003e \u003cspan class=\"token variable\"\u003e$i\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"token selector\"\u003e0 to \u003cspan class=\"token variable\"\u003e$col\u003c/span\u003e * \u003cspan class=\"token variable\"\u003e$row\u003c/span\u003e \u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003e\u003cspan class=\"token variable\"\u003e$mines\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token function\"\u003ecountMine\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token variable\"\u003e$i\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003e\u003cspan class=\"token variable\"\u003e$isMine\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token function\"\u003eisMine\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token variable\"\u003e$i\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n  \u003cspan class=\"token keyword\"\u003e@if\u003c/span\u003e \u003cspan class=\"token function\"\u003enot\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token variable\"\u003e$isMine\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token selector\"\u003eand \u003cspan class=\"token variable\"\u003e$mines\u003c/span\u003e == 0 \u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token property\"\u003e\u003cspan class=\"token variable\"\u003e$selector\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003e@each\u003c/span\u003e \u003cspan class=\"token variable\"\u003e$p\u003c/span\u003e in \u003cspan class=\"token function\"\u003egetLinks\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token variable\"\u003e$i\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"token property\"\u003e\u003cspan class=\"token variable\"\u003e$selector\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token function\"\u003eappend\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token variable\"\u003e$selector\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"#input-#{$i}-open:checked ~ .field .cell:nth-child(#{$p + 1})\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    #\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token function\"\u003ejoin\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token variable\"\u003e$selector\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e'comma'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"token keyword\"\u003e@include\u003c/span\u003e open\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token property\"\u003e\u003cspan class=\"token variable\"\u003e$debug\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token variable\"\u003e$selector\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp class=\"paragraph\"\u003e周りに地雷がない場合のみ、再帰による探索を行います。\u003c/p\u003e\n\u003cp class=\"paragraph\"\u003e一度探索した値をキャッシュとして保持すれば少し効率が上がるのですが\n出力されるCSSが変わるわけではないのでずさんな処理のままです。\u003c/p\u003e\n\u003cp class=\"paragraph\"\u003e「チェックの付いたチェックボックスと兄弟の\u003ccode class=\"code\"\u003e.field\u003c/code\u003e内にあるマスN」\nという定義を大量に作っています。\n都度スタイルを宣言していてはCSSが大変なことになるので、\n配列にセレクタを詰めて一発でスタイルを当てましょう。\u003c/p\u003e\n\u003ch3 class=\"heading lv-3\"\u003e残りの地雷数を表示\u003c/h3\u003e\n\u003cp class=\"paragraph\"\u003eゲームとして何個の地雷があるのかわからないと不便ですよね。\nそこで地雷が残りいくつあるのかを表示できるようにしましょう！\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-scss pre\"\u003e\u003ccode class=\"language-scss code\"\u003e\u003cspan class=\"token property\"\u003e\u003cspan class=\"token variable\"\u003e$lastSelector\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003e@for\u003c/span\u003e \u003cspan class=\"token variable\"\u003e$n\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e \u003cspan class=\"token keyword\"\u003ethrough\u003c/span\u003e \u003cspan class=\"token selector\"\u003e\u003cspan class=\"token variable\"\u003e$row\u003c/span\u003e * \u003cspan class=\"token variable\"\u003e$col\u003c/span\u003e \u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003e\u003cspan class=\"token variable\"\u003e$lastSelector\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token variable\"\u003e$lastSelector\u003c/span\u003e \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e \u003cspan class=\"token string\"\u003e\".flag_check:checked ~\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n  \u003cspan class=\"token selector\"\u003e\u003cspan class=\"token variable\"\u003e#{$lastSelector}\u003c/span\u003e .notice_area .last \u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token selector\"\u003e\u003cspan class=\"token parent important\"\u003e\u0026#x26;\u003c/span\u003e::before \u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"token property\"\u003econtent\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"#{$mineCount - $n}\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token selector\"\u003e.notice_area .last \u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token selector\"\u003e\u003cspan class=\"token parent important\"\u003e\u0026#x26;\u003c/span\u003e::before \u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token property\"\u003econtent\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"#{$mineCount}\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"token selector\"\u003e\u003cspan class=\"token parent important\"\u003e\u0026#x26;\u003c/span\u003e::after \u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token property\"\u003econtent\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e'個'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp class=\"paragraph\"\u003eチェックの数をカウントするような形にしてみました。\n地雷の数 - チェックした数になるように兄弟セレクタを延々と並べます。\u003c/p\u003e\n\u003cp class=\"paragraph\"\u003eちなみに０のときのセレクタはこんな感じ\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-css pre\"\u003e\u003ccode class=\"language-css code\"\u003e\u003cspan class=\"token selector\"\u003e\u003cspan class=\"token class\"\u003e.flag_check\u003c/span\u003e\u003cspan class=\"token pseudo-class\"\u003e:checked\u003c/span\u003e \u003cspan class=\"token combinator\"\u003e~\u003c/span\u003e \u003cspan class=\"token class\"\u003e.flag_check\u003c/span\u003e\u003cspan class=\"token pseudo-class\"\u003e:checked\u003c/span\u003e \u003cspan class=\"token combinator\"\u003e~\u003c/span\u003e \u003cspan class=\"token class\"\u003e.flag_check\u003c/span\u003e\u003cspan class=\"token pseudo-class\"\u003e:checked\u003c/span\u003e \u003cspan class=\"token combinator\"\u003e~\u003c/span\u003e \u003cspan class=\"token class\"\u003e.flag_check\u003c/span\u003e\u003cspan class=\"token pseudo-class\"\u003e:checked\u003c/span\u003e \u003cspan class=\"token combinator\"\u003e~\u003c/span\u003e \u003cspan class=\"token class\"\u003e.flag_check\u003c/span\u003e\u003cspan class=\"token pseudo-class\"\u003e:checked\u003c/span\u003e \u003cspan class=\"token combinator\"\u003e~\u003c/span\u003e \u003cspan class=\"token class\"\u003e.flag_check\u003c/span\u003e\u003cspan class=\"token pseudo-class\"\u003e:checked\u003c/span\u003e \u003cspan class=\"token combinator\"\u003e~\u003c/span\u003e \u003cspan class=\"token class\"\u003e.flag_check\u003c/span\u003e\u003cspan class=\"token pseudo-class\"\u003e:checked\u003c/span\u003e \u003cspan class=\"token combinator\"\u003e~\u003c/span\u003e \u003cspan class=\"token class\"\u003e.flag_check\u003c/span\u003e\u003cspan class=\"token pseudo-class\"\u003e:checked\u003c/span\u003e \u003cspan class=\"token combinator\"\u003e~\u003c/span\u003e \u003cspan class=\"token class\"\u003e.flag_check\u003c/span\u003e\u003cspan class=\"token pseudo-class\"\u003e:checked\u003c/span\u003e \u003cspan class=\"token combinator\"\u003e~\u003c/span\u003e \u003cspan class=\"token class\"\u003e.flag_check\u003c/span\u003e\u003cspan class=\"token pseudo-class\"\u003e:checked\u003c/span\u003e \u003cspan class=\"token combinator\"\u003e~\u003c/span\u003e \u003cspan class=\"token class\"\u003e.notice_area\u003c/span\u003e \u003cspan class=\"token class\"\u003e.last\u003c/span\u003e\u003cspan class=\"token pseudo-element\"\u003e::before\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003econtent\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"0\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp class=\"paragraph\"\u003e人間が読むものじゃないですねー\u003c/p\u003e\n\u003ch3 class=\"heading lv-3\"\u003eクリア判定、ゲームオーバー判定\u003c/h3\u003e\n\u003cp class=\"paragraph\"\u003eやっと最後のゲーム終了判定です。\nここもチェックボックスの状態に応じてスタイル当ててあげることで対応しましょう。\u003c/p\u003e\n\u003cp class=\"paragraph\"\u003e\u003cstrong\u003eゲームオーバーの判定\u003c/strong\u003e\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-scss pre\"\u003e\u003ccode class=\"language-scss code\"\u003e\u003cspan class=\"token comment\"\u003e// ゲームオーバー判定\u003c/span\u003e\n\u003cspan class=\"token property\"\u003e\u003cspan class=\"token variable\"\u003e$overSelector\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003e@each\u003c/span\u003e \u003cspan class=\"token selector\"\u003e\u003cspan class=\"token variable\"\u003e$p\u003c/span\u003e in \u003cspan class=\"token variable\"\u003e$minePos\u003c/span\u003e \u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token selector\"\u003e#input-\u003cspan class=\"token variable\"\u003e#{$p}\u003c/span\u003e-open:checked ~ .game_over \u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token property\"\u003e\u003cspan class=\"token variable\"\u003e$overSelector\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token function\"\u003eappend\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token variable\"\u003e$overSelector\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e #\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u0026#x26;\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e'comma'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"token selector\"\u003e\u003cspan class=\"token variable\"\u003e#{$overSelector}\u003c/span\u003e \u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003edisplay\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e flex\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp class=\"paragraph\"\u003e地雷のチェックボックスが一つでもチェック状態になったら\nゲームオーバー領域の\u003ccode class=\"code\"\u003edisplay: none\u003c/code\u003eを解除し、\n画面全体を覆うようにゲームオーバー画面を表示します。\nこれはとても素直です。\u003c/p\u003e\n\u003cp class=\"paragraph\"\u003e\u003cstrong\u003eゲームクリアの判定\u003c/strong\u003e\nすべての地雷のマスにフラグが立ったらクリア判定にしたいです。\nしかし、それだとすべてのマスにフラグを立てたらクリアになってしまうので\n地雷以外の場所にフラグが立っていないことも条件とする必要がありました。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-scss pre\"\u003e\u003ccode class=\"language-scss code\"\u003e\u003cspan class=\"token property\"\u003e\u003cspan class=\"token variable\"\u003e$clearSelector\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"input\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003e@for\u003c/span\u003e \u003cspan class=\"token variable\"\u003e$i\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"token selector\"\u003e0 to \u003cspan class=\"token variable\"\u003e$col\u003c/span\u003e * \u003cspan class=\"token variable\"\u003e$row\u003c/span\u003e \u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003e\u003cspan class=\"token variable\"\u003e$wk\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003e@if\u003c/span\u003e \u003cspan class=\"token function\"\u003eisMine\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token variable\"\u003e$i\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token property\"\u003e\u003cspan class=\"token variable\"\u003e$wk\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"#input-#{$i}-flag:checked\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token keyword\"\u003e@else\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token property\"\u003e\u003cspan class=\"token variable\"\u003e$wk\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"#input-#{$i}-flag:not(:checked)\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003e\u003cspan class=\"token variable\"\u003e$clearSelector\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token variable\"\u003e$clearSelector\u003c/span\u003e \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e \u003cspan class=\"token string\"\u003e' ~ '\u003c/span\u003e \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e \u003cspan class=\"token variable\"\u003e$wk\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"token selector\"\u003e\u003cspan class=\"token variable\"\u003e#{$clearSelector}\u003c/span\u003e ~ .game_clear \u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003edisplay\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e flex\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp class=\"paragraph\"\u003e「これで地雷の場所にのみフラグが立っている」というセレクタの完成です！！\u003c/p\u003e\n\u003cp class=\"paragraph\"\u003eあと\u003cstrong\u003eゲームオーバー\u003c/strong\u003eと\u003cstrong\u003eゲームクリア\u003c/strong\u003eの要素をlabel要素にし、\nINPUT(type=reset)に紐づけています。\u003c/p\u003e\n\u003cp class=\"paragraph\"\u003eこうすることで各要素クリック時にすべてのチェックが外れ\n初期状態に戻るようにしています。\u003c/p\u003e\n\u003cp class=\"paragraph\"\u003eこれで何度でも遊べる！！！\u003c/p\u003e\n\u003ch2 class=\"heading lv-2\"\u003eあとがき\u003c/h2\u003e\n\u003cp class=\"paragraph\"\u003e軽い気持ちで始めてみましたが中々に骨が折れました...\nただ、配列操作や乱数生成など普通にスタイリングしているだけでは\n中々触ることのない機能を触ることができたので面白かったです:relaxed:\u003c/p\u003e\n\u003cp class=\"paragraph\"\u003eあと普通のプログラム言語にはない視点でのロジックを考える必要があり、色々と刺激を受けました！\u003c/p\u003e\n\u003cp class=\"paragraph\"\u003e今回は「CSSってこんな事もできるんですよ！」という紹介ということでやってみましたが、\n他にもやってる方が結構いるので実装を見比べてみるとおもしろいかもしれませんね:sunny:\u003c/p\u003e\n\u003cp class=\"paragraph\"\u003eそれでは皆さんよいSassライフを！(^_^)/~\u003c/p\u003e\n\u003chr\u003e\n\u003cp class=\"paragraph\"\u003eおしまい\u003c/p\u003e"},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"css_mine_sweeper"},"buildId":"2TeC_BqFkmcRD1K9YUrqZ","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-51ce6eb9ed73aacaf515.js"></script><script src="/_next/static/chunks/main-8741ed3c7ec57f378f59.js" async=""></script><script src="/_next/static/chunks/webpack-95c2b224bccf352ee870.js" async=""></script><script src="/_next/static/chunks/framework.daa7383ad2ab2e6757c1.js" async=""></script><script src="/_next/static/chunks/commons.286c5ad94e4334e87283.js" async=""></script><script src="/_next/static/chunks/pages/_app-62c4ae74494db6a57e9e.js" async=""></script><script src="/_next/static/chunks/79afb1f29f0e22fb2195c114356294f95861ebcc.293ad4049eec03f4e065.js" async=""></script><script src="/_next/static/chunks/2c3b9bffc7150b37a7b3810dfcf1c0b0fac2bd18.26412b03d1df03d45396.js" async=""></script><script src="/_next/static/chunks/pages/posts/%5Bslug%5D-d84c8237cab24ecd19e3.js" async=""></script><script src="/_next/static/2TeC_BqFkmcRD1K9YUrqZ/_buildManifest.js" async=""></script><script src="/_next/static/2TeC_BqFkmcRD1K9YUrqZ/_ssgManifest.js" async=""></script></body></html>