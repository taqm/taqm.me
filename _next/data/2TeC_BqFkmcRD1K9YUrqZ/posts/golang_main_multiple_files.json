{"pageProps":{"post":"{\"slug\":\"golang_main_multiple_files\",\"title\":\"Go言語でmainパッケージに複数ファイルある場合にハマった（基礎）\",\"publishedAt\":\"2018-09-10T00:28:41.000Z\",\"description\":\"Go言語で複数のファイルを持つmainパッケージを動作させる際にハマったポイントの解説です。\",\"tags\":[\"Golang\"]}","content":"<p class=\"paragraph\">main.goの１ファイルから卒業するため、\nとりあえずファイルを分けたらハマったのでメモ</p>\n<p class=\"paragraph\">前提としてプロジェクトがこうなっているとします。</p>\n<div class=\"remark-highlight\"><pre class=\"language-unknown pre\"><code class=\"language-unknown code\">.\n├── main.go\n└── foo.go</code></pre></div>\n<p class=\"paragraph\">各ファイルの中身は以下の通り</p>\n<p class=\"paragraph\">■ <strong>main.go</strong></p>\n<div class=\"remark-highlight\"><pre class=\"language-go pre\"><code class=\"language-go code\"><span class=\"token keyword\">package</span> main\n\n<span class=\"token keyword\">func</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token function\">Bar</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p class=\"paragraph\">■ <strong>foo.go</strong></p>\n<div class=\"remark-highlight\"><pre class=\"language-go pre\"><code class=\"language-go code\"><span class=\"token keyword\">package</span> main\n\n<span class=\"token keyword\">import</span> <span class=\"token string\">\"fmt\"</span>\n\n<span class=\"token keyword\">func</span> <span class=\"token function\">Bar</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\tfmt<span class=\"token punctuation\">.</span><span class=\"token function\">Println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hello main package\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p class=\"paragraph\">とてもシンプルですね。\nそれでは実行してみましょう! <code class=\"code\">hello main package</code> と出力されるはずです！</p>\n<div class=\"remark-highlight\"><pre class=\"language-bash pre\"><code class=\"language-bash code\">$ go run main.go\n</code></pre></div>\n<blockquote>\n<p class=\"paragraph\">./main.go:4:2: undefined: Bar</p>\n</blockquote>\n<p class=\"paragraph\">おや？なにかエラーが・・・</p>\n<p class=\"paragraph\">どうやら<code class=\"code\">foo.go</code>が認識されていないようです。</p>\n<p class=\"paragraph\">すごく基本的な部分なのですが実行の仕方がまずかったようです。\n正しく動くパターンはこちら</p>\n<div class=\"remark-highlight\"><pre class=\"language-bash pre\"><code class=\"language-bash code\">$ go run *.go\n\n<span class=\"token comment\"># もしくはすべてのファイルを渡す</span>\n$ go run main.go foo.go\n</code></pre></div>\n<p class=\"paragraph\">こうしないと本当に<code class=\"code\">main.go</code>しか対象としてくれないため、\n別ファイルで定義されたものが参照できなかったということです。</p>\n<p class=\"paragraph\">おしまい。</p>"},"__N_SSG":true}